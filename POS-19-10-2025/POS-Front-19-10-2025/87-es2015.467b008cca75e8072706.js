(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{HPyM:function(e,t,n){"use strict";n.r(t),n.d(t,"CashMovementFilterModule",function(){return w});var i=n("ofXK"),a=n("PCNd"),l=n("tyNb"),r=n("fXoL"),o=n("xPZZ"),d=n("OAKb"),s=n("A4Bx"),m=n("R9YG"),c=n("sYmb"),p=n("jcQU"),h=n("3Pt+"),u=n("ed8r"),g=n("GJ+o");const f=["grid"];function v(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",39),r["\u0275\u0275elementStart"](1,"div",40),r["\u0275\u0275elementStart"](2,"ejs-grid",41,42),r["\u0275\u0275listener"]("toolbarClick",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().toolbarClick(t)})("actionBegin",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onResource(t)}),r["\u0275\u0275elementStart"](4,"e-columns"),r["\u0275\u0275element"](5,"e-column",43),r["\u0275\u0275element"](6,"e-column",44),r["\u0275\u0275element"](7,"e-column",45),r["\u0275\u0275element"](8,"e-column",46),r["\u0275\u0275element"](9,"e-column",47),r["\u0275\u0275element"](10,"e-column",48),r["\u0275\u0275element"](11,"e-column",49),r["\u0275\u0275element"](12,"e-column",50),r["\u0275\u0275element"](13,"e-column",51),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dataSource",e.EODReportData)("allowPaging",!0)("pageSettings",e.pageSettings)("allowSorting",!0)("allowFiltering",!0)("filterSettings",e.filterOptions)("toolbar",e.toolbarOptions)("allowGrouping",!0)("allowPdfExport",!0)("allowExcelExport",!0)("editSettings",e.editOptions),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("allowEditing",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowEditing",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowEditing",!1)("columns",e.orderColumns),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowEditing",!1)("columns",e.returnColumns),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowEditing",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowEditing",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("allowEditing",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("commands",e.commands)}}const E=function(){return["/home"]},S=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a,l,r){this.dashboardSer=e,this.datepipe=t,this.banchser=n,this.toastr=i,this.toastrMessage=a,this.languageSerService=l,this.translate=r,this.fields={text:"UserName",value:"UserName"},this.branshfields={text:"Name",value:"Id"},this.sorting="Ascending",this.DateFormat={type:"date",format:"dd/MM/yyyy"},this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}ngOnInit(){this.GetAllUsers(),this.GetBranch(),this.initializeGrid(),this.initializColumn()}initializeGrid(){this.pageSettings={pageSizes:!0,pageSize:10},this.toolbarOptions=["Search","PdfExport","ExcelExport"],this.editOptions={showDeleteConfirmDialog:!0,allowEditing:!0,allowDeleting:!1},this.filterOptions={type:"Menu"},this.commands=[{type:"Edit",buttonOption:{cssClass:"e-flat",iconCss:"e-edit e-icons"}},{type:"Save",buttonOption:{cssClass:"e-flat",iconCss:"e-update e-icons"}},{type:"Delete",buttonOption:{cssClass:"e-flat",iconCss:"e-delete e-icons"}},{type:"Cancel",buttonOption:{cssClass:"e-flat",iconCss:"e-cancel-icon e-icons"}}]}initializColumn(){this.orderColumns=[{field:"AmountCash",headerText:"\u0646\u0641\u062f",allowEditing:!1,width:80,textAlign:"Right",minWidth:10},{field:"AmountDelay",headerText:"\u0622\u062c\u0644",width:80,allowEditing:!1,textAlign:"Right",minWidth:10},{field:"AmountVisa",headerText:"\u0641\u064a\u0632\u0627",width:80,allowEditing:!1,textAlign:"Right",minWidth:10}],this.returnColumns=[{field:"RTAmountCash",headerText:"\u0646\u0641\u062f",allowEditing:!1,width:80,textAlign:"Right",minWidth:10},{field:"RTAmountDelay",headerText:"\u0622\u062c\u0644",width:80,allowEditing:!1,textAlign:"Right",minWidth:10},{field:"RTAmountVisa",headerText:"\u0641\u064a\u0632\u0627",width:80,allowEditing:!1,textAlign:"Right",minWidth:10}]}toolbarClick(e){"Grid_pdfexport"===e.item.id&&this.grid.pdfExport(),"Grid_excelexport"===e.item.id&&this.grid.excelExport()}GetAllUsers(){this.dashboardSer.getAllUsersInfo().subscribe(e=>{this.users=e})}GetBranch(){this.banchser.GetAllBranches().subscribe(e=>{this.Branch=e})}GetEODReport(){var e=this.formatDate(this.dateFrom),t=this.formatDate(this.dateTo);this.dashboardSer.getEODReport(this.userData,e,t).subscribe(e=>{this.EODReportData=[],this.EODReport=e.Item1;var t=e.Item2;console.log(t),this.EODReport.forEach(e=>{e&&e.length>0&&(e.forEach(e=>{let n=t.filter(t=>t.AppUserId==e.CreatorUserId&&this.formatDate2(t.CreationTime)==this.formatDate2(e.CreateTime))[0];n&&(e.ReceiveCashCashier=n.Amount),this.EODReportData.push(e)}),this.EODReportData.forEach(e=>{e.ReceiveCashCashier=0,e.date=this.formatDate(e.CreateTime),e.deficit=e.Amount-e.RTAmount+e.ReceiveCashCashier-e.EEAmount,10==e.PayType&&(e.AmountCash=e.Amount,e.RTAmountCash=e.RTAmount),20==e.PayType&&(e.AmountDelay=e.Amount,e.RTAmountDelay=e.RTAmount),30==e.PayType&&(e.AmountVisa=e.Amount,e.RTAmountVisa=e.RTAmount)}))})})}formatDate(e){var t=new Date(e),n=""+(t.getMonth()+1),i=""+t.getDate(),a=t.getFullYear();return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),[a,n,i].join("-")}formatDate2(e){var t=new Date(e),n=""+(t.getMonth()+1),i=""+t.getDate(),a=t.getFullYear();n.length<2&&(n="0"+n),i.length<2&&(i="0"+i);var l=[a,n,i].join("-");return new Date(l)}onResourceDelete(e){let t=+e.target.parentNode.parentNode.parentNode.getAttribute("aria-rowindex");this.grid.selectRow(t);var n=this.grid.getSelectedRecords()[0];n.IsSync?this.toastr.warning(this.toastrMessage.GlobalMessages(7),"CashMovementFilter"):this.dashboardSer.deleteEODReport(n).subscribe(e=>{3==e?(this.toastr.warning(this.toastrMessage.GlobalMessages(e),"CashMovementFilter"),this.GetEODReport()):this.toastr.error(this.toastrMessage.GlobalMessages(e),"CashMovementFilter")},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"CashMovementFilter")})}onResource(e){console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](i.DatePipe),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](s.e),r["\u0275\u0275directiveInject"](s.b),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](c.e))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-cash-movement-filter"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](f,5),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},decls:74,vars:43,consts:[[1,"col-md-12"],[1,"row","mx-1","shadow-sm","mb-2","bg-white","rounded","align-items-center"],[1,"col-md-6","col-sm-12"],[1,"breadcrumb","bg-white","my-0","breadcrumb-arrow-sep"],[1,"breadcrumb-item"],["routerLinkActive","router-link-active",1,"styleAll",3,"routerLink"],[1,"material-icons",2,"font-size","1.2rem"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-6","col-sm-12","d-flex"],[1,"px-0","col-md-12"],[1,"ms-panel-fh"],[1,"cont"],[1,"ms-panel-body-1","clearfix"],[1,"tab-content"],["role","tabpanel"],[1,"col-xl-12","col-md-12","col-xs-12"],[1,"ms-panel","rounded"],[1,"ms-panel-body"],["novalidate","",1,"needs-validation","clearfix"],[1,"form-row","pt-3"],[1,"col-md-6","mb-3"],[1,"row","pr-xs-0"],[1,"col-md-4","d-flex","justify-content-start","align-items-center","label1"],["for","validationCustom19"],["id","multiselectbransh",3,"dataSource","fields","ngModel","placeholder","width","sortOrder","ngModelChange"],["id","multiselectelement",3,"dataSource","fields","ngModel","placeholder","width","sortOrder","ngModelChange"],[1,"col-md-6","paddingLeftz"],[1,"input-group","editInputGroup"],[1,"input-group"],["name","datefrom","id","datefrom","placeholder","mm/dd/yyyy",1,"form-control","borderRadius","Prelative",3,"format","ngModel","ngModelChange"],["datefrom","ngModel"],["format","dd/MM/yyyy","name","dateto","id","dateto","placeholder","mm/dd/yyyy",1,"form-control","borderRadius","Prelative",3,"ngModel","ngModelChange"],[1,"row"],[1,"col-10"],[1,"col-2"],["type","button",1,"btn","btn-outline-danger","btnNav",2,"max-width","300px","width","110px",3,"click"],[1,""],[1,"col-lg-12"],["class","ms-card",4,"ngIf"],[1,"ms-card"],[1,"ms-card-body"],["id","Grid",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","toolbar","allowGrouping","allowPdfExport","allowExcelExport","editSettings","toolbarClick","actionBegin"],["grid",""],["field","date","headerText","\u0627\u0644\u062a\u0627\u0631\u064a\u062e","format","yMd","textAlign","left",3,"allowEditing"],["field","CashierName","headerText","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645","textAlign","left",3,"allowEditing"],["field","Amount","headerText","\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","textAlign","center",3,"allowEditing","columns"],["field","RTAmount","headerText","\u0627\u0644\u0645\u0631\u062f\u0648\u062f\u0627\u062a","textAlign","center",3,"allowEditing","columns"],["field","CRAmount","headerText","\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621","textAlign","left",3,"allowEditing"],["field","EEAmount","headerText","\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a","textAlign","left",3,"allowEditing"],["field","ReceiveCashCashier","headerText","\u0627\u0633\u062a\u0644\u0627\u0645 \u0627\u0644\u0646\u0642\u062f \u0644\u0644\u0643\u0627\u0634\u064a\u0631","textAlign","left"],["field","deficit","width","88","headerText","\u0627\u0644\u0639\u062c\u0632","textAlign","left",3,"allowEditing"],["width","99","headerText","Actions","textAlign","center",3,"commands"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"ol",3),r["\u0275\u0275elementStart"](4,"li",4),r["\u0275\u0275elementStart"](5,"a",5),r["\u0275\u0275elementStart"](6,"i",6),r["\u0275\u0275text"](7,"home"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"li",7),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"br"),r["\u0275\u0275elementStart"](15,"div",9),r["\u0275\u0275elementStart"](16,"div",10),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275elementStart"](18,"div",12),r["\u0275\u0275elementStart"](19,"div",13),r["\u0275\u0275elementStart"](20,"div",14),r["\u0275\u0275elementStart"](21,"div",15),r["\u0275\u0275elementStart"](22,"div",16),r["\u0275\u0275elementStart"](23,"div",17),r["\u0275\u0275elementStart"](24,"div",18),r["\u0275\u0275elementStart"](25,"div",19),r["\u0275\u0275elementStart"](26,"div",20),r["\u0275\u0275elementStart"](27,"div",21),r["\u0275\u0275elementStart"](28,"div",22),r["\u0275\u0275elementStart"](29,"label",23),r["\u0275\u0275text"](30),r["\u0275\u0275pipe"](31,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"ejs-multiselect",24),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.branshdata=e}),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",20),r["\u0275\u0275elementStart"](35,"div",21),r["\u0275\u0275elementStart"](36,"div",22),r["\u0275\u0275elementStart"](37,"label",23),r["\u0275\u0275text"](38),r["\u0275\u0275pipe"](39,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"ejs-multiselect",25),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.userData=e}),r["\u0275\u0275pipe"](41,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](42,"div",20),r["\u0275\u0275elementStart"](43,"div",21),r["\u0275\u0275elementStart"](44,"div",22),r["\u0275\u0275elementStart"](45,"label",23),r["\u0275\u0275text"](46),r["\u0275\u0275pipe"](47,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"div",26),r["\u0275\u0275elementStart"](49,"div",27),r["\u0275\u0275elementStart"](50,"div",28),r["\u0275\u0275elementStart"](51,"ejs-datepicker",29,30),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateFrom=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](53,"div",20),r["\u0275\u0275elementStart"](54,"div",21),r["\u0275\u0275elementStart"](55,"div",22),r["\u0275\u0275elementStart"](56,"label",23),r["\u0275\u0275text"](57),r["\u0275\u0275pipe"](58,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"div",26),r["\u0275\u0275elementStart"](60,"div",27),r["\u0275\u0275elementStart"](61,"div",28),r["\u0275\u0275elementStart"](62,"ejs-datepicker",31),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateTo=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](63,"br"),r["\u0275\u0275elementStart"](64,"div",32),r["\u0275\u0275element"](65,"div",33),r["\u0275\u0275elementStart"](66,"div",34),r["\u0275\u0275elementStart"](67,"button",35),r["\u0275\u0275listener"]("click",function(){return t.GetEODReport()}),r["\u0275\u0275text"](68),r["\u0275\u0275pipe"](69,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"div",36),r["\u0275\u0275elementStart"](71,"div",37),r["\u0275\u0275template"](72,v,14,21,"div",38),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](73,"div")),2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction0"](42,E)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](9,24,"ReturnOrder.Home")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,26,"Reports.CashMovementFilter")," "),r["\u0275\u0275advance"](19),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](31,28,"Reports.BranchName")," : "),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](33,30,"Reports.BranchName")),r["\u0275\u0275property"]("dataSource",t.Branch)("fields",t.branshfields)("ngModel",t.branshdata)("width",250)("sortOrder",t.sorting),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](39,32,"permission.SelectUser")," : "),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](41,34,"permission.SelectUser")),r["\u0275\u0275property"]("dataSource",t.users)("fields",t.fields)("ngModel",t.userData)("width",250)("sortOrder",t.sorting),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](47,36,"Shared.From")," : "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("format",t.DateFormat)("ngModel",t.dateFrom),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](58,38,"Shared.To")," : "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.dateTo),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](69,40,"Shared.Show")," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",null!=t.EODReport))},directives:[l.e,l.d,p.f,h.r,h.u,u.b,i.NgIf,g.p,g.g,g.b,g.f,g.a],pipes:[c.d],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[l.f.forChild(S)],l.f]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.CommonModule,a.a,x]]}),e})()}}]);