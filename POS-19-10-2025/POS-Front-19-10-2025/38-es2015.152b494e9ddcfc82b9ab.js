(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{OnQw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{constructor(e){this._el=e,this.regex=new RegExp(/^[0-9]+(\.[0-9]*){0,1}$/g),this.specialKeys=["Backspace","Tab","End","Home"],this.allowDecimals=!1,this.ngModelChange=new r.EventEmitter}onInputChange(e){const t=this._el.nativeElement.value;this.allowDecimals?String(t).match(this.regex)||(this._el.nativeElement.value=""):(this._el.nativeElement.value=t.replace(/[^0-9]*/g,""),t!==this._el.nativeElement.value&&e.stopPropagation())}onKeyDown(e){if(this.allowDecimals){if(-1!==this.specialKeys.indexOf(e.key))return;this.fraction&&this.fraction>0&&(this.regex=new RegExp("^\\d*(\\.\\d{0,"+this.fraction+"})?$"));const t=this._el.nativeElement.value.concat(e.key);t&&!String(t).match(this.regex)&&e.preventDefault()}}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ElementRef))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","numbersOnly",""]],hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("input",function(e){return t.onInputChange(e)})("keydown",function(e){return t.onKeyDown(e)})},inputs:{allowDecimals:"allowDecimals",numbersOnly:"numbersOnly",fraction:"fraction"},outputs:{ngModelChange:"ngModelChange"}}),e})()},etpl:function(e,t,n){"use strict";n.r(t),n.d(t,"TaxesModule",function(){return $});var r=n("ofXK"),a=n("tyNb"),i=n("uXKD"),s=n("fXoL"),l=n("R9YG"),o=n("sYmb"),d=n("lmDL"),c=n("3Pt+"),m=n("auvQ"),p=n("OnQw"),u=n("jcQU");const h=["frmRef"];function g(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"pointofsale.NameIsRequired")," "))}function x(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",52),s["\u0275\u0275template"](1,g,3,3,"div",53),s["\u0275\u0275elementEnd"]()),2&e){s["\u0275\u0275nextContext"]();const e=s["\u0275\u0275reference"](27);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.errors.required)}}function f(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"Tax Type Is Required"),s["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",52),s["\u0275\u0275template"](1,f,2,0,"div",53),s["\u0275\u0275elementEnd"]()),2&e){s["\u0275\u0275nextContext"]();const e=s["\u0275\u0275reference"](67);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.errors.required)}}function b(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"Value Type Is Required"),s["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",52),s["\u0275\u0275template"](1,b,2,0,"div",53),s["\u0275\u0275elementEnd"]()),2&e){s["\u0275\u0275nextContext"]();const e=s["\u0275\u0275reference"](84);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.errors.required)}}function E(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",14),s["\u0275\u0275elementStart"](1,"div",15),s["\u0275\u0275elementStart"](2,"div",16),s["\u0275\u0275elementStart"](3,"label",17),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",18),s["\u0275\u0275elementStart"](7,"div",19),s["\u0275\u0275elementStart"](8,"div",20),s["\u0275\u0275element"](9,"i",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",22),s["\u0275\u0275elementStart"](11,"ejs-multiselect",55,56),s["\u0275\u0275listener"]("ngModelChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().responseobj.TaxDetails=t})("ngModelChange",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().SetVatTaxDetails()}),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](5,9,"tax.includeOtherTaxes"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275propertyInterpolate"]("placeholder",s["\u0275\u0275pipeBind1"](13,11,"products.Taxes")),s["\u0275\u0275property"]("disabled",!e.enableChiled)("ngModel",e.responseobj.TaxDetails)("dataSource",e.sourcTaxes)("allowFiltering",!0)("fields",e.FLG)("width",300)("sortOrder",e.sorting)}}function T(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",14),s["\u0275\u0275elementStart"](1,"div",15),s["\u0275\u0275elementStart"](2,"div",16),s["\u0275\u0275elementStart"](3,"label",17),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",18),s["\u0275\u0275elementStart"](7,"div",19),s["\u0275\u0275elementStart"](8,"div",20),s["\u0275\u0275element"](9,"i",54),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",22),s["\u0275\u0275elementStart"](11,"ejs-combobox",57,58),s["\u0275\u0275listener"]("ngModelChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().responseobj.VATTaxDocumentId=t})("ngModelChange",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().SetHasVatTax()}),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](5,8,"tax.HasVatTax"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275propertyInterpolate"]("placeholder",s["\u0275\u0275pipeBind1"](13,10,"products.Taxes")),s["\u0275\u0275property"]("ngModel",e.responseobj.VATTaxDocumentId)("dataSource",e.sourcTaxes)("autofill",!0)("allowFiltering",!0)("fields",e.FLG)("disabled",!e.enableChiled)}}function I(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"Value Is Required"),s["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",52),s["\u0275\u0275template"](1,I,2,0,"div",53),s["\u0275\u0275elementEnd"]()),2&e){s["\u0275\u0275nextContext"]();const e=s["\u0275\u0275reference"](106);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.errors.required)}}function j(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",14),s["\u0275\u0275elementStart"](1,"div",15),s["\u0275\u0275elementStart"](2,"div",16),s["\u0275\u0275elementStart"](3,"label",17),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",18),s["\u0275\u0275elementStart"](7,"div",19),s["\u0275\u0275elementStart"](8,"div",20),s["\u0275\u0275element"](9,"i",39),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",22),s["\u0275\u0275elementStart"](11,"input",59,60),s["\u0275\u0275listener"]("ngModelChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().responseobj.MinimumValue=t}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](5,5,"tax.MinimumValue"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("numbersOnly",e.responseobj.MinimumValue)("allowDecimals",!0)("ngModel",e.responseobj.MinimumValue)("disabled",!e.enableChiled)}}let w=(()=>{class e extends i.g{constructor(e,t,n,r){super(),this.taxSer=e,this.languageSerService=t,this.translate=n,this.router=r,this.initializeobjects()}ngOnInit(){this.FLG={text:"Name",value:"DocumentId"},this.scrFirstOpen().subscribe(()=>{this.taxFirstOpen(),this.responseobj.screenPermission.Print=!1})}taxFirstOpen(){this.taxSer.taxFirstOpen().subscribe(e=>{this.taxes=e.Taxes,this.branches=e.Branches,this.setTaxConfiguration()})}initializeobjects(){this.responseobj={},this.service=this.taxSer,this.request=this.router.getCurrentNavigation().extras,this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}afterPag(e){this.formPaging({formObj:e}),this.setTaxConfiguration()}quickEvents(e){switch(e){case i.h.afterNew:this.afterNew({}),this.enableChiled=!0;for(const e in this.frmRef.controls)"ValueType"!=e&&"Type"!=e||this.frmRef.controls[e].setValue(1);this.setTaxConfiguration(),this.responseobj&&this.responseobj.screenPermission&&(this.responseobj.screenPermission.Print=!1);break;case i.h.afterAdd:this.enableChiled=!1,this.afterAdd(),this.taxFirstOpen(),this.responseobj&&this.responseobj.screenPermission&&(this.responseobj.screenPermission.Print=!1);break;case i.h.afterUpdate:this.enableChiled=!1,this.taxFirstOpen();break;case i.h.afterModify:this.enableChiled=!0,this.afterModify(),this.setTaxConfiguration(),this.responseobj&&this.responseobj.screenPermission&&(this.responseobj.screenPermission.Print=!1);break;case i.h.afterUndo:this.enableChiled=!1}}setTaxConfiguration(){this.responseobj.ValueType=1,this.responseobj.Type=1,this.ShowVatTaxDetails(),this.ShowTaxBranches()}ShowVatTaxDetails(){if(this.sourcTaxes=this.taxes.filter(e=>1==e.Type&&e.DocumentId!=this.responseobj.DocumentId),this.responseobj.HasVATTax&&!this.responseobj.VATTaxDocumentId){const e=this.taxes.find(e=>e.Id==this.responseobj.VATTaxId);this.responseobj.VATTaxDocumentId=e.DocumentId,this.SetHasVatTax()}this.responseobj.TaxDetails=[],this.responseobj.IncludedVATTaxes||(this.responseobj.IncludedVATTaxes=[]),this.responseobj.IncludedVATTaxes&&this.responseobj.IncludedVATTaxes.length>0&&(this.responseobj.TaxDetails=this.responseobj.IncludedVATTaxes.map(e=>e.DocumentId)),this.SetVatTaxDetails()}SetVatTaxDetails(){this.responseobj.IncludedVATTaxes=[],this.responseobj.DocumentId||this.responseobj.Name||(this.responseobj.TaxDetails=[]),this.responseobj.IncludeOtherTaxes&&(this.responseobj.Value=0),this.responseobj.TaxDetails&&this.responseobj.TaxDetails.length>0?(this.responseobj.Value=0,this.responseobj.TaxDetails.forEach(e=>{let t=this.taxes.find(t=>t.DocumentId==e);if(t){let e=this.clone(t);e.IncludedVATTaxes=[],this.responseobj.IncludedVATTaxes.push(e),this.responseobj.Value+=Number(e.Value)}}),this.responseobj.IncludedVATTaxes&&this.responseobj.IncludedVATTaxes.length>0?(this.responseobj.IncludeOtherTaxes=!0,this.responseobj.VATTaxDocumentId=void 0,this.SetHasVatTax()):this.responseobj.IncludeOtherTaxes=!1):this.responseobj.IncludeOtherTaxes=!1}SetHasVatTax(){if(this.taxes&&this.taxes.length){const e=this.taxes.find(e=>this.responseobj.VATTaxDocumentId&&e.DocumentId==this.responseobj.VATTaxDocumentId);this.responseobj.HasVATTax=!!e,this.responseobj.VATTaxId=null==e?void 0:e.Id,this.responseobj.VATTax=e,e&&(this.responseobj.TaxDetails=[],this.SetVatTaxDetails())}}ShowTaxBranches(){this.responseobj.TaxBranchesIds=[],this.responseobj.TaxBranches||(this.responseobj.TaxBranches=[]),this.responseobj.TaxBranches&&this.responseobj.TaxBranches.length>0&&(this.responseobj.TaxBranchesIds=this.responseobj.TaxBranches.map(e=>e.BranchDocumentId)),this.SetTaxBranches()}SetTaxBranches(){this.responseobj.TaxBranches=[],this.responseobj.TaxBranchesIds&&this.responseobj.TaxBranchesIds.length>0&&this.responseobj.TaxBranchesIds.forEach(e=>{let t=this.branches.find(t=>t.DocumentId==e);t&&(this.clone(t),this.responseobj.TaxBranches.push({BranchId:t.Id,BranchDocumentId:t.DocumentId,TaxId:this.responseobj.Id,TaxDocumentId:this.responseobj.DocumentId}))})}setExtraTaxRelation(){this.responseobj.ExtraTax||(this.responseobj.VATTaxDocumentId=void 0,this.SetHasVatTax(),this.responseobj.TaxDetails=[],this.SetVatTaxDetails())}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.e),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](o.e),s["\u0275\u0275directiveInject"](i.c))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-tax"]],viewQuery:function(e,t){if(1&e&&s["\u0275\u0275viewQuery"](h,5),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.frmRef=e.first)}},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:145,vars:68,consts:[["name","taxform","novalidate","",1,"",3,"ngSubmit"],["frmRef","ngForm"],[3,"request","form","service","formobj","pagename","pageNumber","afterPag","quickEvents"],[1,"px-0","col-md-12"],[1,"ms-panel-fh"],[1,"cont"],[1,"ms-panel-body-1","clearfix"],[1,"tab-content"],["role","tabpanel"],[1,"col-xl-12","col-md-12","col-xs-12"],[1,"ms-panel"],[1,"ms-panel-body"],["novalidate","",1,"needs-validation","clearfix"],[1,"form-row","pt-3"],[1,"col-md-6","mb-3"],[1,"row","d-flex","pr-xs-0"],[1,"col-md-4","d-flex","justify-content-start","align-items-center","label1"],["for","validationCustom19"],[1,"col-md-8","paddingLeftz"],[1,"input-group","editInputGroup"],[1,"input-group-addon"],["aria-hidden","true",1,"fas","fa-user"],[1,"input-group"],["type","text","disabled","","id","Name","name","Name","required","",1,"form-control",3,"ngModel","ngModelChange"],["Name","ngModel"],["class","alert alert-danger editAlertCash",4,"ngIf"],["type","text","disabled","","id","ForeignName","name","ForeignName",1,"form-control",3,"ngModel","ngModelChange"],["ForeignName","ngModel"],["type","text","disabled","","id","TaxCode","name","TaxCode",1,"form-control",3,"ngModel","ngModelChange"],["TaxCode","ngModel"],[1,"fas","fa-chart-line"],["name","Type","required","","disabled","","readonly","",1,"form-control","borderRadius",3,"ngModel","ngModelChange"],["Type","ngModel"],["value","1","disabled",""],[1,"fas","fa-percent"],["name","ValueType","required","","disabled","","readonly","",1,"form-control","borderRadius",3,"ngModel","ngModelChange"],["ValueType","ngModel"],["value","2","disabled",""],["class","col-md-6 mb-3",4,"ngIf"],[1,"fas","fa-file-contract"],["type","number","name","Value","disabled","",1,"form-control","borderRadius",3,"numbersOnly","allowDecimals","ngModel","ngModelChange"],["Value","ngModel"],[1,"fas","fa-code-branch"],["name","TaxBranchesIds","disabled","",1,"form-control","borderRadius",3,"ngModel","dataSource","allowFiltering","fields","placeholder","width","sortOrder","ngModelChange"],["TaxBranchesIds","ngModel"],[1,"row"],[1,"col-md-3","d-flex","justify-content-start","align-items-center","label1"],[1,"col-md-3","paddingLeftz"],["type","checkbox","name","ExtraTax","disabled","",1,"form-control","borderRadius",3,"ngModel","ngModelChange","change"],["ExtraTax","ngModel"],["type","checkbox","name","DefaultForProduct","disabled","",1,"form-control","borderRadius",3,"ngModel","ngModelChange"],["DefaultForProduct","ngModel"],[1,"alert","alert-danger","editAlertCash"],[4,"ngIf"],[1,"fas","fa-copy"],["name","TaxDetails",1,"form-control","borderRadius",3,"disabled","ngModel","dataSource","allowFiltering","fields","placeholder","width","sortOrder","ngModelChange"],["TaxDetails","ngModel"],["name","VATTaxDocumentId","id","VATTaxDocumentId_id",1,"form-control",3,"ngModel","dataSource","autofill","allowFiltering","placeholder","fields","disabled","ngModelChange"],["VATTaxDocumentId","ngModel"],["type","number","name","MinimumValue",1,"form-control","borderRadius",3,"numbersOnly","allowDecimals","ngModel","disabled","ngModelChange"],["MinimumValue","ngModel"]],template:function(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275element"](0,"app-breadcrumbs"),s["\u0275\u0275elementStart"](1,"form",0,1),s["\u0275\u0275listener"]("ngSubmit",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275reference"](2).form.valid}),s["\u0275\u0275elementStart"](3,"app-pagetransactions",2),s["\u0275\u0275listener"]("afterPag",function(e){return t.afterPag(e)})("quickEvents",function(e){return t.quickEvents(e)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",3),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275elementStart"](6,"div",5),s["\u0275\u0275elementStart"](7,"div",6),s["\u0275\u0275elementStart"](8,"div",7),s["\u0275\u0275elementStart"](9,"div",8),s["\u0275\u0275elementStart"](10,"div",9),s["\u0275\u0275elementStart"](11,"div",10),s["\u0275\u0275elementStart"](12,"div",11),s["\u0275\u0275elementStart"](13,"div",12),s["\u0275\u0275elementStart"](14,"div",13),s["\u0275\u0275elementStart"](15,"div",14),s["\u0275\u0275elementStart"](16,"div",15),s["\u0275\u0275elementStart"](17,"div",16),s["\u0275\u0275elementStart"](18,"label",17),s["\u0275\u0275text"](19),s["\u0275\u0275pipe"](20,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"div",18),s["\u0275\u0275elementStart"](22,"div",19),s["\u0275\u0275elementStart"](23,"div",20),s["\u0275\u0275element"](24,"i",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"div",22),s["\u0275\u0275elementStart"](26,"input",23,24),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.Name=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](28,x,2,1,"div",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"div",14),s["\u0275\u0275elementStart"](30,"div",15),s["\u0275\u0275elementStart"](31,"div",16),s["\u0275\u0275elementStart"](32,"label",17),s["\u0275\u0275text"](33),s["\u0275\u0275pipe"](34,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"div",18),s["\u0275\u0275elementStart"](36,"div",19),s["\u0275\u0275elementStart"](37,"div",20),s["\u0275\u0275element"](38,"i",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](39,"div",22),s["\u0275\u0275elementStart"](40,"input",26,27),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.ForeignName=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",14),s["\u0275\u0275elementStart"](43,"div",15),s["\u0275\u0275elementStart"](44,"div",16),s["\u0275\u0275elementStart"](45,"label",17),s["\u0275\u0275text"](46),s["\u0275\u0275pipe"](47,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](48,"div",18),s["\u0275\u0275elementStart"](49,"div",19),s["\u0275\u0275elementStart"](50,"div",20),s["\u0275\u0275element"](51,"i",21),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](52,"div",22),s["\u0275\u0275elementStart"](53,"input",28,29),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.TaxCode=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"div",14),s["\u0275\u0275elementStart"](56,"div",15),s["\u0275\u0275elementStart"](57,"div",16),s["\u0275\u0275elementStart"](58,"label",17),s["\u0275\u0275text"](59),s["\u0275\u0275pipe"](60,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](61,"div",18),s["\u0275\u0275elementStart"](62,"div",19),s["\u0275\u0275elementStart"](63,"div",20),s["\u0275\u0275element"](64,"i",30),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](65,"div",22),s["\u0275\u0275elementStart"](66,"select",31,32),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.Type=e}),s["\u0275\u0275elementStart"](68,"option",33),s["\u0275\u0275text"](69),s["\u0275\u0275pipe"](70,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](71,v,2,1,"div",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](72,"div",14),s["\u0275\u0275elementStart"](73,"div",15),s["\u0275\u0275elementStart"](74,"div",16),s["\u0275\u0275elementStart"](75,"label",17),s["\u0275\u0275text"](76),s["\u0275\u0275pipe"](77,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](78,"div",18),s["\u0275\u0275elementStart"](79,"div",19),s["\u0275\u0275elementStart"](80,"div",20),s["\u0275\u0275element"](81,"i",34),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](82,"div",22),s["\u0275\u0275elementStart"](83,"select",35,36),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.ValueType=e}),s["\u0275\u0275elementStart"](85,"option",33),s["\u0275\u0275text"](86),s["\u0275\u0275pipe"](87,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](88,"option",37),s["\u0275\u0275text"](89),s["\u0275\u0275pipe"](90,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](91,S,2,1,"div",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](92,E,14,13,"div",38),s["\u0275\u0275template"](93,T,14,12,"div",38),s["\u0275\u0275elementStart"](94,"div",14),s["\u0275\u0275elementStart"](95,"div",15),s["\u0275\u0275elementStart"](96,"div",16),s["\u0275\u0275elementStart"](97,"label",17),s["\u0275\u0275text"](98),s["\u0275\u0275pipe"](99,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](100,"div",18),s["\u0275\u0275elementStart"](101,"div",19),s["\u0275\u0275elementStart"](102,"div",20),s["\u0275\u0275element"](103,"i",39),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](104,"div",22),s["\u0275\u0275elementStart"](105,"input",40,41),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.Value=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](107,y,2,1,"div",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](108,"div",14),s["\u0275\u0275elementStart"](109,"div",15),s["\u0275\u0275elementStart"](110,"div",16),s["\u0275\u0275elementStart"](111,"label",17),s["\u0275\u0275text"](112),s["\u0275\u0275pipe"](113,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](114,"div",18),s["\u0275\u0275elementStart"](115,"div",19),s["\u0275\u0275elementStart"](116,"div",20),s["\u0275\u0275element"](117,"i",42),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](118,"div",22),s["\u0275\u0275elementStart"](119,"ejs-multiselect",43,44),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.TaxBranchesIds=e})("ngModelChange",function(){return t.SetTaxBranches()}),s["\u0275\u0275pipe"](121,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](122,"div",14),s["\u0275\u0275elementStart"](123,"div",45),s["\u0275\u0275elementStart"](124,"div",46),s["\u0275\u0275elementStart"](125,"label",17),s["\u0275\u0275text"](126),s["\u0275\u0275pipe"](127,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](128,"div",47),s["\u0275\u0275elementStart"](129,"div",19),s["\u0275\u0275elementStart"](130,"div",22),s["\u0275\u0275elementStart"](131,"input",48,49),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.ExtraTax=e})("change",function(){return t.setExtraTaxRelation()}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](133,"div",14),s["\u0275\u0275elementStart"](134,"div",45),s["\u0275\u0275elementStart"](135,"div",46),s["\u0275\u0275elementStart"](136,"label",17),s["\u0275\u0275text"](137),s["\u0275\u0275pipe"](138,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](139,"div",47),s["\u0275\u0275elementStart"](140,"div",19),s["\u0275\u0275elementStart"](141,"div",22),s["\u0275\u0275elementStart"](142,"input",50,51),s["\u0275\u0275listener"]("ngModelChange",function(e){return t.responseobj.DefaultForProduct=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](144,j,13,7,"div",38),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275reference"](2),n=s["\u0275\u0275reference"](27),r=s["\u0275\u0275reference"](67),a=s["\u0275\u0275reference"](84),i=s["\u0275\u0275reference"](106);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("request",t.request)("form",e)("service",t.service)("formobj",t.responseobj)("pagename",t.pagename)("pageNumber",t.pageNumber),s["\u0275\u0275advance"](16),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](20,42,"Shared.Name")," "),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.responseobj.Name),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.submitted&&n.invalid||n.invalid&&n.touched),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](34,44,"Shared.ForeignName")," "),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.responseobj.ForeignName),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](47,46,"Shared.TaxCode")," "),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.responseobj.TaxCode),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](60,48,"tax.taxtype")," :"),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.responseobj.Type),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](70,50,"tax.vat")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.submitted&&r.invalid||r.invalid&&r.touched),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](77,52,"tax.valuetype"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.responseobj.ValueType),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](87,54,"tax.percentage")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](90,56,"tax.value")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.submitted&&a.invalid||a.invalid&&a.touched),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.responseobj.ExtraTax&&!t.responseobj.HasVATTax),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.responseobj.ExtraTax&&!t.responseobj.IncludeOtherTaxes),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](99,58,"Reports.Amount"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("numbersOnly",t.responseobj.Value)("allowDecimals",!0)("ngModel",t.responseobj.Value),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.submitted&&i.invalid||i.invalid&&i.touched),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](113,60,"tax.branches"),":"),s["\u0275\u0275advance"](7),s["\u0275\u0275propertyInterpolate"]("placeholder",s["\u0275\u0275pipeBind1"](121,62,"Shared.Branch")),s["\u0275\u0275property"]("ngModel",t.responseobj.TaxBranchesIds)("dataSource",t.branches)("allowFiltering",!0)("fields",t.FLG)("width",300)("sortOrder",t.sorting),s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](127,64,"Shared.ExtraTax")," : "),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",t.responseobj.ExtraTax),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](138,66,"tax.DefaultForProduct")," : "),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngModel",t.responseobj.DefaultForProduct),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.responseobj.ExtraTax&&!t.responseobj.IncludeOtherTaxes)}},directives:[d.a,c.C,c.s,c.t,m.a,c.c,c.z,c.r,c.u,r.NgIf,c.A,c.v,c.D,c.w,p.a,u.f,c.a,u.a],pipes:[o.d],styles:[""]}),e})();var C=n("OQQ3"),P=n("b3S3"),M=n("GJ+o");const D=["grid"];function V(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275element"](1,"input",10),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("checked",e.IsSync)}}function A(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",11),s["\u0275\u0275elementStart"](1,"button",12),s["\u0275\u0275listener"]("click",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().assignTaxToProducts(t)}),s["\u0275\u0275element"](2,"i",13),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,1,"tax.assigntaxproducts")," "))}let O=(()=>{class e extends i.a{constructor(e,t,n,r,a,i,s,l,o){super(t,n,r,o),this.taxSer=e,this.toster=t,this.messages=n,this.SettingSer=r,this._applayout=a,this._sharedService=i,this.languageSerService=s,this.translate=l,this.Rout=o,this.initializeobjects()}ngOnInit(){this.GetGrideList().subscribe(()=>{this.toolbarList=[],this.showNew&&this.toolbarList.push({text:"",tooltipText:"Add",prefixIcon:"e-add",id:"Add"}),this.showView&&this.toolbarList.push({text:"",tooltipText:"View",prefixIcon:"e-view",id:"View"}),this.showEdit&&this.toolbarList.push({text:"",tooltipText:"Edit",prefixIcon:"e-edit",id:"Edit"}),this.showDelete&&this.toolbarList.push({text:"",tooltipText:"Delete",prefixIcon:"e-delete",id:"Delete"}),this.toolbarOptions=this.toolbarList}),this.initializeGrid(),setTimeout(()=>{this.DisabledGridButton()},300)}initializeobjects(){this.responseobj=[],this.service=this.taxSer,this.showEdit=!1,this.showDelete=!1,this.showNew=!1,this.showView=!1,this.showPrint=!1,this.RouteName="/tax",this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}assignTaxToProducts(e){const t=this.grid.getRowInfo(e.target).rowData;this.router.navigateByUrl("/tax/assignTaxProducts",t)}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.e),s["\u0275\u0275directiveInject"](i.f),s["\u0275\u0275directiveInject"](i.b),s["\u0275\u0275directiveInject"](i.d),s["\u0275\u0275directiveInject"](C.a),s["\u0275\u0275directiveInject"](P.a),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](o.e),s["\u0275\u0275directiveInject"](i.c))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-tax-list"]],viewQuery:function(e,t){if(1&e&&s["\u0275\u0275viewQuery"](D,5),2&e){let e;s["\u0275\u0275queryRefresh"](e=s["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:26,consts:[[1,"col-lg-12"],[1,"ms-card"],[1,"ms-card-body"],["id","Grid",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","toolbar","allowGrouping","allowPdfExport","allowExcelExport","editSettings","rowSelected","toolbarClick"],["grid",""],["field","Name","textAlign","center",3,"headerText","isPrimaryKey"],["field","ForeignName","textAlign","center",3,"headerText"],["field","IsSync","editType","booleanedit","type","boolean",3,"headerText","allowFiltering","allowSorting"],["template",""],["textAlign","center",3,"headerText"],["type","checkbox","disabled","","name","IsSync","id","IsSync",3,"checked"],[1,"justify-content-center","d-flex","align-items-center"],["type","button",1,"btn","btn-success","p-1","has-icon","m-0",2,"min-width","fit-content !important",3,"click"],[1,"fa","m-0","fa-link"]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"app-breadcrumbs"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"ejs-grid",3,4),s["\u0275\u0275listener"]("rowSelected",function(e){return t.onRowSelected(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),s["\u0275\u0275elementStart"](6,"e-columns"),s["\u0275\u0275element"](7,"e-column",5),s["\u0275\u0275pipe"](8,"translate"),s["\u0275\u0275element"](9,"e-column",6),s["\u0275\u0275pipe"](10,"translate"),s["\u0275\u0275elementStart"](11,"e-column",7),s["\u0275\u0275pipe"](12,"translate"),s["\u0275\u0275template"](13,V,2,1,"ng-template",null,8,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"e-column",9),s["\u0275\u0275pipe"](16,"translate"),s["\u0275\u0275template"](17,A,5,3,"ng-template",null,8,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("dataSource",t.responseobj.List)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowFiltering",!0)("filterSettings",t.filterOptions)("toolbar",t.toolbarOptions)("allowGrouping",!0)("allowPdfExport",!0)("allowExcelExport",!0)("editSettings",t.editOptions),s["\u0275\u0275advance"](3),s["\u0275\u0275propertyInterpolate"]("headerText",s["\u0275\u0275pipeBind1"](8,18,"Shared.Name")),s["\u0275\u0275property"]("isPrimaryKey",!0),s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("headerText",s["\u0275\u0275pipeBind1"](10,20,"customer.ForeignName")),s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("headerText",s["\u0275\u0275pipeBind1"](12,22,"Shared.IsSync")),s["\u0275\u0275property"]("allowFiltering",!1)("allowSorting",!1),s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate"]("headerText",s["\u0275\u0275pipeBind1"](16,24,"delivery.Actions")))},directives:[d.a,M.p,M.g,M.b,M.f,M.a],pipes:[o.d],styles:[""]}),e})();var B=n("zyXO"),R=n("S8xs"),F=n("Lm2G");function N(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275elementStart"](1,"input",28,29),s["\u0275\u0275listener"]("change",function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().filterProductsBySelectedgroups()})("ngModelChange",function(e){return t.$implicit.Selected=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"p",10),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",e.Selected),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.Name)}}function k(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"option",30),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("value",e),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e," ")}}function L(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"tr",31),s["\u0275\u0275elementStart"](1,"td",32),s["\u0275\u0275elementStart"](2,"input",28,29),s["\u0275\u0275listener"]("change",function(){const t=s["\u0275\u0275restoreView"](e).$implicit;return s["\u0275\u0275nextContext"]().addProductTaxes(t)})("ngModelChange",function(e){return t.$implicit.Selected=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"td"),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",e.Selected),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.Name)}}function G(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",33),s["\u0275\u0275elementStart"](1,"div",34),s["\u0275\u0275elementStart"](2,"pagination",35),s["\u0275\u0275listener"]("ngModelChange",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().currentPage=t})("numPages",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().smallnumPages=t})("pageChanged",function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().pageChanged(t)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",36),s["\u0275\u0275elementStart"](4,"div",37),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("boundaryLinks",!0)("ngModel",e.currentPage)("maxSize",10)("itemsPerPage",e.NumberItems)("totalItems",e.filtredProducts.length),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate2"]("The selected page no: ",e.currentPage,"/",e.smallnumPages,"")}}const q=[{path:"",component:w,data:["tax","taxlist"]},{path:"taxlist",component:O,data:["tax","taxlist"]},{path:"assignTaxProducts",component:(()=>{class e extends B.a{constructor(e,t,n,r,a,i,s){super(),this.taxSer=e,this.router=t,this.toster=n,this.messages=r,this.languageSerService=a,this.translate=i,this.SettingSer=s,this.customClass="customClass",this.isFirstOpen=!0,this.currentPage=1,this.smallnumPages=0,this.options=[10,15,20,50],this.NumberItems=15,this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language),this.tax=this.router.getCurrentNavigation().extras,this.tax&&(this.tax.DocumentId||this.tax.Id)||this.router.navigateByUrl("/tax/taxlist")}pageChanged(e){this.finalProductList=this.filtredProducts.slice((e.page-1)*e.itemsPerPage,e.page*e.itemsPerPage)}ngOnInit(){this.assignTaxFirstOpen(),this.GetSettings()}toggleAllGroups(e){this.productGroups.forEach(t=>{t.Selected=e.target.checked}),this.filterProductsBySelectedgroups()}toggleAllProducts(e){this.filtredProducts.forEach(t=>{t.Selected=e.target.checked,this.addProductTaxes(t)})}assignTaxFirstOpen(){this.taxSer.assignTaxFirstOpen().subscribe(e=>{this.taxes=e.Taxes,this.productGroups=e.ProductGroups,this.productTaxes=e.ProductTaxes,this.products=[],this.filtredProducts=[],this.productGroups.forEach(e=>{null!=e.Products&&(e.Products.forEach(e=>{e=this.assignTaxToProduct(e)}),this.products.push.apply(this.products,e.Products))}),this.selectProductGroups(),this.filterProductsBySelectedgroups()})}selectProductGroups(){let e=this.products.filter(e=>e.Selected).map(e=>e.ProductGroupDocumentId);this.productGroups.forEach(t=>{e.includes(t.DocumentId)&&(t.Selected=!0)})}assignTaxToProduct(e){if(this.productTaxes&&this.productTaxes.length>0&&this.taxes&&this.taxes.length>0)return this.productTaxes.find(t=>(e.Id&&t.ProductId==e.Id||t.ProductDocumentId==e.DocumentId)&&(this.tax.Id&&t.TaxId==this.tax.Id||t.TaxDocumentId==this.tax.DocumentId))&&(e.Selected=!0),e}filterProductsBySelectedgroups(){let e=this.productGroups.filter(e=>e.Selected).map(e=>e.DocumentId);this.filtredProducts=this.cloneList(e.length>0?this.products.filter(t=>e.includes(t.ProductGroupDocumentId)):this.products),this.pagainateProducts()}onChange(e){this.NumberItems=Number(e),this.pagainateProducts()}pagainateProducts(){this.finalProductList=this.filtredProducts.slice(0,this.NumberItems)}addProductTaxes(e){this.productTaxes||(this.productTaxes=[]);let t=this.productTaxes.find(t=>(e.Id&&t.ProductId==e.Id||t.ProductDocumentId==e.DocumentId)&&(this.tax.Id&&t.TaxId==this.tax.Id||t.TaxDocumentId==this.tax.DocumentId));if(e.Selected)t||this.productTaxes.push({TaxId:this.tax.Id,TaxDocumentId:this.tax.DocumentId,ProductId:e.Id,ProductDocumentId:e.DocumentId});else if(t){let e=this.productTaxes.indexOf(t);-1!=e&&this.productTaxes.splice(e,1)}}insertOrUpdateProductTaxes(){this.productTaxes||(this.productTaxes=[]),this.taxSer.insertOrUpdateProductTaxes(this.productTaxes).subscribe(e=>{1==e?this.toster.success(this.messages.GlobalMessages(e)):this.toster.error(this.messages.GlobalMessages(e)),this.assignTaxFirstOpen()})}backToTaxList(){this.router.navigateByUrl("/tax/taxlist")}GetSettings(){this.SettingSer.GetSettings().subscribe(e=>{this.settings=e})}get disableSave(){return!this.settings||this.settings.PullAllTablesFromPOS||3!=this.settings.FinancialSystem}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](i.e),s["\u0275\u0275directiveInject"](i.c),s["\u0275\u0275directiveInject"](i.f),s["\u0275\u0275directiveInject"](i.b),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](o.e),s["\u0275\u0275directiveInject"](i.d))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-assign-tax-products"]],features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:47,vars:30,consts:[[1,"col-md-12"],[1,"pb-1","d-flex","justify-content-start","align-items-center"],["type","submit",1,"btn","btn-outline-info","btnNav",3,"disabled","click"],[1,"far","fa-save","pr-1"],[1,"row"],[3,"isAnimated"],[1,"mb-3",3,"heading","panelClass"],[1,"col-md-12","align-items-center","d-flex"],["type","checkbox","name","ISActiveGroups",1,"form-control","borderRadius",2,"width","1.5rem",3,"ngModel","change","ngModelChange"],["ISActiveGroups","ngModel"],[1,"mx-1","my-0"],[1,"m-1","p-1"],["class","col-md-3 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"EditingCustomClass",3,"heading","panelClass","isOpen"],[1,"btn-group","justify-content-start","align-items-center","d-flex","p-1"],[1,"m-0","px-1"],["name","NumberItems","id","aantal",1,"form-control",2,"width","5rem",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","p-0"],[1,"table-responsive"],[1,"table","table-bordered","text-center","BottomTableReturnOrder","border-radius-5"],["scope","col",1,"d-flex","justify-content-center"],["type","checkbox","name","ISActiveProducts",1,"form-control","borderRadius",2,"width","1.5rem",3,"ngModel","change","ngModelChange"],["ISActiveProducts","ngModel"],["scope","col"],["class","p-1","data-dismiss","modal",4,"ngFor","ngForOf"],["class","d-flex justify-content-between row align-items-center",4,"ngIf"],[1,"col-md-3","d-flex","align-items-center"],["type","checkbox","name","Selected",1,"form-control","borderRadius",2,"width","1.5rem",3,"ngModel","change","ngModelChange"],["Selected","ngModel"],[3,"value"],["data-dismiss","modal",1,"p-1"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-between","row","align-items-center"],[1,"col-md-8","col-sm-12"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","ngModel","maxSize","itemsPerPage","totalItems","ngModelChange","numPages","pageChanged"],[1,"col-sm-12","col-md-4"],[1,"PageNumberAccord"]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"app-breadcrumbs"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"button",2),s["\u0275\u0275listener"]("click",function(){return t.insertOrUpdateProductTaxes()}),s["\u0275\u0275element"](4,"i",3),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",0),s["\u0275\u0275elementStart"](8,"div",4),s["\u0275\u0275elementStart"](9,"div",0),s["\u0275\u0275elementStart"](10,"accordion",5),s["\u0275\u0275elementStart"](11,"accordion-group",6),s["\u0275\u0275pipe"](12,"translate"),s["\u0275\u0275elementStart"](13,"div",4),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"input",8,9),s["\u0275\u0275listener"]("change",function(e){return t.toggleAllGroups(e)})("ngModelChange",function(e){return t.SelectAllgroups=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"p",10),s["\u0275\u0275text"](18),s["\u0275\u0275pipe"](19,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](20,"hr",11),s["\u0275\u0275elementStart"](21,"div",4),s["\u0275\u0275template"](22,N,5,2,"div",12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"accordion-group",13),s["\u0275\u0275pipe"](24,"translate"),s["\u0275\u0275elementStart"](25,"div",4),s["\u0275\u0275elementStart"](26,"div",0),s["\u0275\u0275elementStart"](27,"div",14),s["\u0275\u0275elementStart"](28,"p",15),s["\u0275\u0275text"](29),s["\u0275\u0275pipe"](30,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](31,"select",16),s["\u0275\u0275listener"]("change",function(e){return t.onChange(e.target.value)})("ngModelChange",function(e){return t.NumberItems=e}),s["\u0275\u0275template"](32,k,2,2,"option",17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",18),s["\u0275\u0275elementStart"](34,"div",19),s["\u0275\u0275elementStart"](35,"table",20),s["\u0275\u0275elementStart"](36,"thead"),s["\u0275\u0275elementStart"](37,"tr"),s["\u0275\u0275elementStart"](38,"th",21),s["\u0275\u0275elementStart"](39,"input",22,23),s["\u0275\u0275listener"]("change",function(e){return t.toggleAllProducts(e)})("ngModelChange",function(e){return t.SelectAllproducts=e}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](41,"th",24),s["\u0275\u0275text"](42),s["\u0275\u0275pipe"](43,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](44,"tbody"),s["\u0275\u0275template"](45,L,6,2,"tr",25),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](46,G,6,7,"div",26),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("disabled",t.disableSave),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](6,18,"pagetransactions.save")," "),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("isAnimated",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate"]("heading",s["\u0275\u0275pipeBind1"](12,20,"Shared.Taxesaddedtomeals")),s["\u0275\u0275property"]("panelClass",t.customClass),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngModel",t.SelectAllgroups),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](19,22,"tax.SelectAllProductGroups")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",t.productGroups),s["\u0275\u0275advance"](1),s["\u0275\u0275propertyInterpolate"]("heading",s["\u0275\u0275pipeBind1"](24,24,"products.Products")),s["\u0275\u0275property"]("panelClass",t.customClass)("isOpen",t.isFirstOpen),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](30,26,"Shared.ItemsPerPage")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngModel",t.NumberItems),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.options),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",t.SelectAllproducts),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](43,28,"Shared.Name")),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngForOf",t.finalProductList),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.filtredProducts))},directives:[d.a,R.a,R.c,c.a,c.r,c.u,r.NgForOf,c.A,r.NgIf,c.v,c.D,F.a],pipes:[o.d],styles:[""]}),e})(),data:["tax","taxlist","assignTaxProducts"]}];let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[a.f.forChild(q)],a.f]}),e})();var U=n("PCNd");let $=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,z,c.j,c.y,U.a,F.b.forRoot(),R.b.forRoot()]]}),e})()},lmDL:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("fXoL"),a=n("R9YG"),i=n("tyNb"),s=n("s1I5"),l=n("ofXK"),o=n("sYmb");function d(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"a",11),r["\u0275\u0275element"](1,"i",12),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("href",e.helpPath,r["\u0275\u0275sanitizeUrl"])}}const c=function(e){return{active:e}};function m(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"li",8),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).index;return r["\u0275\u0275nextContext"]().clickedRoute(t)}),r["\u0275\u0275elementStart"](1,"a",9),r["\u0275\u0275element"](2,"i",6),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](5,d,2,1,"a",10),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](5,c,n.currentroutes==e)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,3,n.getTranslationName("Shared",e))," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.currentroutes==e)}}const p=function(){return["/home"]};let u=(()=>{class e{constructor(e,t,n,r){this.languageSerService=e,this.router=t,this.Router=n,this.configService=r}ngDoCheck(){this.Router.data.subscribe(e=>{this.languageSerService.setcurrentsetRoute(e)}),this.languageSerService.setRoute.subscribe(e=>this.Allroutes=e),this.AllRetrunRoutes=Object.values(this.Allroutes),this.currentroutes=this.router.url.split("/").slice(1),1==this.currentroutes.length?this.currentroutes=this.router.url.split("/").slice(1):2==this.currentroutes.length?this.currentroutes=this.router.url.split("/").slice(2):3==this.currentroutes.length&&(this.currentroutes=this.router.url.split("/").slice(3))}ngOnInit(){}getTranslationName(e,t){return e+"."+(t?t.toLowerCase():"")}clickedRoute(e){this.selectedIndex=e,this.AllRetrunRoutes=Object.values(this.Allroutes),0==e?this.router.navigate(["/"+this.AllRetrunRoutes[0]]):1==e||3==e?this.router.navigate(["/"+this.AllRetrunRoutes[0]+"/"+this.AllRetrunRoutes[1]]):2==e&&this.router.navigate(["/"+this.AllRetrunRoutes[0]+"/"+this.AllRetrunRoutes[2]])}get helpPath(){return`${this.trimTrailingSlash(this.configService.helpPath)}/${this.currentroutes} `}trimTrailingSlash(e){return e?e.replace(/\/+$/,""):""}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](i.b),r["\u0275\u0275directiveInject"](i.a),r["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-breadcrumbs"]],inputs:{Allroutes:"Allroutes"},decls:11,vars:6,consts:[[1,"col-md-12"],[1,"row","mx-1","shadow-sm","mb-2","bg-white","rounded","align-items-center"],[1,"col-md-12","col-sm-12"],[1,"breadcrumb","bg-white","my-0","breadcrumb-arrow-sep"],[1,"breadcrumb-item"],["routerLinkActive","router-link-active",1,"styleAll",3,"routerLink"],[1,"material-icons",2,"font-size","1.2rem"],["class","breadcrumb-item",3,"click",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"click"],[1,"styleAll",3,"ngClass"],["target","_blank","class","mr-2 cursorPointer active",3,"href",4,"ngIf"],["target","_blank",1,"mr-2","cursorPointer","active",3,"href"],["aria-hidden","true",1,"fa","fa-question-circle","pl-1"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"ol",3),r["\u0275\u0275elementStart"](4,"li",4),r["\u0275\u0275elementStart"](5,"a",5),r["\u0275\u0275elementStart"](6,"i",6),r["\u0275\u0275text"](7,"home"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,m,6,7,"li",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction0"](5,p)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](9,3,"ReturnOrder.Home")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.AllRetrunRoutes))},directives:[i.e,i.d,l.NgForOf,l.NgClass,l.NgIf],pipes:[o.d],styles:[""]}),e})()},zyXO:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{constructor(){this.priceLang="fr"==JSON.parse(localStorage.getItem("langs"))?"fr-FR":"en-US"}ngOnInit(){}gridLoad(e,t){t.element.addEventListener("mousedown",e=>{if(e.target.classList.contains("e-rowcell")){t.isEdit&&t.endEdit();let n=parseInt(e.target.getAttribute("Index"));t.selectRow(n),t.startEdit()}})}gridCheckBoxBind(e,t,n,r){let a=t.getRowObjectFromUID(e.event.target.closest("tr").getAttribute("data-uid")).data;e.event.target.closest("td").getAttribute("index"),t.setCellValue(a[n],r,e.checked)}clone(e){return Object.assign({},e)}cloneList(e){return Object.assign([],e)}deepCopy(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());try{return JSON.parse(JSON.stringify(e))}catch(t){throw console.error("Deep copy failed for object:",e,t),new Error("Unable to deep copy object!")}}oldDeepCopy(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=this.deepCopy(e[n]);return t}if(e instanceof Object){for(var a in t={},e)e.hasOwnProperty(a)&&(t[a]=this.deepCopy(e[a]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}clearAllIntervals(){const e=window.setInterval(function(){},Number.MAX_SAFE_INTEGER);for(let t=1;t<e;t++)window.clearInterval(t)}filterList(e,t){let n=[];return e&&e.length>0?t&&""!=t?(Object.keys(e[0]).forEach(r=>{"object"!=typeof e[0][r]&&e.filter(e=>e[r]&&e[r].toString().toLowerCase().includes(t.toString().toLowerCase())).forEach(e=>{-1===n.indexOf(e)&&n.push(e)})}),n):this.deepCopy(e):n}filterListByKey(e,t,n){let r=[];return e&&e.length>0?n&&""!=n?("object"!=typeof e[0][t]&&e.filter(e=>e[t]&&e[t].toString().toLowerCase().includes(n.toString().toLowerCase())).forEach(e=>{-1===r.indexOf(e)&&r.push(e)}),r):this.deepCopy(e):r}filterListByKeys(e,t,n){let r=[];return e&&e.length>0?n&&""!=n?(t.forEach(t=>{"object"!=typeof e[0][t]&&e.filter(e=>e[t]&&e[t].toString().toLowerCase().includes(n.toString().toLowerCase())).forEach(e=>{-1===r.indexOf(e)&&r.push(e)})}),r):this.deepCopy(e):r}distinct(e,t){return[...new Map(e.map(e=>[e[t],e])).values()]}getDecodedToken(e){return JSON.parse(atob(e.split(".")[1]))}clamp(e,t,n){return Math.min(Math.max(e,t),n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e}),e})()}}]);