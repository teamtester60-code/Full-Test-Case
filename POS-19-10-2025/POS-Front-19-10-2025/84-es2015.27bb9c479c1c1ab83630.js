(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{E9N0:function(e,t,n){"use strict";n.r(t),n.d(t,"BackupsModule",function(){return M});var r=n("ofXK"),a=n("3Pt+"),i=n("PCNd"),o=n("tyNb"),l=n("fXoL"),s=n("sYmb"),d=n("A4Bx");let p=(()=>{class e{constructor(e,t){this.http=e,this.common=t}backup(){return this.http.get(this.common.rooturl+"/Backup/Backup")}firstOpen(){return this.http.get(this.common.rooturl+"/Backup/FirstOpen")}updatePOSToLastVersion(){return this.http.get(this.common.rooturl+"/Backup/UpdatePOSToLastVersion")}update(e){return this.http.put(this.common.rooturl+"/Backup/Update",e)}restore(e){return this.http.post(this.common.rooturl+"/Backup/Restore",e)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](d.c),l["\u0275\u0275inject"](d.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=n("5eHb"),u=n("E8vI"),m=n("R9YG"),b=n("jcQU");function h(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",21),l["\u0275\u0275elementStart"](1,"div",22),l["\u0275\u0275elementStart"](2,"div",23),l["\u0275\u0275element"](3,"div"),l["\u0275\u0275element"](4,"div"),l["\u0275\u0275element"](5,"div"),l["\u0275\u0275element"](6,"div"),l["\u0275\u0275element"](7,"div"),l["\u0275\u0275element"](8,"div"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",53),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"Shared.URLIsrequired")," "))}function f(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",51),l["\u0275\u0275template"](1,g,3,3,"div",52),l["\u0275\u0275elementEnd"]()),2&e){l["\u0275\u0275nextContext"]();const e=l["\u0275\u0275reference"](46);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.errors.required)}}function v(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",54),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"](2);return t.show=!1,t.disabled=!1}),l["\u0275\u0275element"](1,"i",55),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,1,"pagetransactions.Edit")," "))}function S(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",56),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"](2);return t.show=!0,t.disabled=!0}),l["\u0275\u0275element"](1,"i",55),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,1,"pagetransactions.undo")," "))}function E(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",57),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const t=l["\u0275\u0275nextContext"](2);return t.update(t.backupModel),t.show=!0,t.disabled=!0}),l["\u0275\u0275element"](1,"i",55),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](3,1,"Shared.Save")," "))}function k(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"form",24,25),l["\u0275\u0275listener"]("ngSubmit",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275reference"](1).form.valid}),l["\u0275\u0275elementStart"](2,"div",26),l["\u0275\u0275elementStart"](3,"div",1),l["\u0275\u0275elementStart"](4,"h4",6),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",27),l["\u0275\u0275elementStart"](8,"div",28),l["\u0275\u0275elementStart"](9,"div",29),l["\u0275\u0275elementStart"](10,"label",30),l["\u0275\u0275text"](11),l["\u0275\u0275pipe"](12,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",29),l["\u0275\u0275elementStart"](14,"div",31),l["\u0275\u0275elementStart"](15,"div",12),l["\u0275\u0275element"](16,"i",32),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",14),l["\u0275\u0275elementStart"](18,"ejs-combobox",33,34),l["\u0275\u0275listener"]("ngModelChange",function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().backupModel.BackupDurationType=t}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](20,"div",27),l["\u0275\u0275elementStart"](21,"div",28),l["\u0275\u0275elementStart"](22,"div",35),l["\u0275\u0275elementStart"](23,"label",36),l["\u0275\u0275text"](24),l["\u0275\u0275pipe"](25,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"div",37),l["\u0275\u0275elementStart"](27,"div",31),l["\u0275\u0275elementStart"](28,"div",12),l["\u0275\u0275element"](29,"i",38),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",14),l["\u0275\u0275elementStart"](31,"input",39,40),l["\u0275\u0275listener"]("ngModelChange",function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().backupModel.BackupDuration=t}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"label",41),l["\u0275\u0275text"](34),l["\u0275\u0275pipe"](35,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](36,"hr"),l["\u0275\u0275elementStart"](37,"div",42),l["\u0275\u0275elementStart"](38,"label",10),l["\u0275\u0275text"](39),l["\u0275\u0275pipe"](40,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](41,"div",11),l["\u0275\u0275elementStart"](42,"div",12),l["\u0275\u0275element"](43,"i",43),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](44,"div",14),l["\u0275\u0275elementStart"](45,"input",44,45),l["\u0275\u0275listener"]("ngModelChange",function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().backupModel.Path=t}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](47,f,2,1,"div",17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](48,"div",18),l["\u0275\u0275template"](49,v,4,3,"button",46),l["\u0275\u0275template"](50,S,4,3,"button",47),l["\u0275\u0275template"](51,E,4,3,"button",48),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](52,"div",18),l["\u0275\u0275elementStart"](53,"button",49),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().backup()}),l["\u0275\u0275element"](54,"i",50),l["\u0275\u0275text"](55),l["\u0275\u0275pipe"](56,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275reference"](1),t=l["\u0275\u0275reference"](46),n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](6,21,"PosSettings.backupDurationOption")," :"),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](12,23,"PosSettings.backupDurationTypes")," "),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngModel",n.backupModel.BackupDurationType)("allowFiltering",!0)("autofill",!0)("dataSource",n.backupDurationTypes)("disabled",n.disabled)("fields",n.fields),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](25,25,"Shared.Every")," "),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngModel",n.backupModel.BackupDuration)("disabled",n.disabled)("max",5),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](35,27,1==n.backupModel.BackupDurationType?"Shared.Hour":"Shared.Day")," "),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](40,29,"Shared.Path")," "),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",n.backupModel.Path)("disabled",n.disabled),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",e.submitted&&t.invalid||t.invalid&&t.touched),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",n.show),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.show),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!n.show),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](56,31,"Shared.doBackup")," ")}}function x(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",53),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](2,1,"Shared.URLIsrequired")," "))}function w(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",51),l["\u0275\u0275template"](1,x,3,3,"div",52),l["\u0275\u0275elementEnd"]()),2&e){l["\u0275\u0275nextContext"]();const e=l["\u0275\u0275reference"](23);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",null==e.errors?null:e.errors.required)}}const y=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a,i){this.translate=e,this.backupService=t,this.toastr=n,this.router=r,this.toastrMessage=a,this.languageSerService=i,this.fields={text:"Name",value:"Id"},this.restorePath="",this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}ngOnInit(){this.show=!0,this.disabled=!0,this.firstOpen()}updatePos(){this.isUpdating=!0,this.backupService.updatePOSToLastVersion().subscribe(e=>{},e=>{})}firstOpen(){this.backupService.firstOpen().subscribe(e=>{this.backupModel=e,this.currentVersion=e.currentVersion,this.latestVersion=e.latestVersion,this.backupDurationTypes=[{Id:1,Name:this.translate.instant("setting.Hours")},{Id:2,Name:this.translate.instant("setting.Days")}]})}backup(){this.requestStarted||(this.requestStarted=!0,this.backupService.backup().subscribe(e=>{this.requestStarted=!1,2==e?this.toastr.success(this.translate.instant("Shared.doBackup"),this._pagename):this.toastr.error(this.toastrMessage.GlobalMessages(e),this._pagename)},e=>{this.requestStarted=!1}))}update(e){this.backupService.update(e).subscribe(e=>{2==e?this.toastr.success(this.toastrMessage.GlobalMessages(e),this._pagename):this.toastr.error(this.toastrMessage.GlobalMessages(e),this._pagename)})}restore(){this.requestStarted||(this.requestStarted=!0,this.backupService.restore({Path:this.restorePath}).subscribe(e=>{this.requestStarted=!1,2==e?this.toastr.success(this.toastrMessage.GlobalMessages(e),this._pagename):this.toastr.error(this.toastrMessage.GlobalMessages(e),this._pagename),this.logout()},e=>{this.requestStarted=!1}))}logout(){localStorage.removeItem("token"),setTimeout(()=>{this.router.navigateByUrl("/login"),location.reload()},200)}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](s.e),l["\u0275\u0275directiveInject"](p),l["\u0275\u0275directiveInject"](c.b),l["\u0275\u0275directiveInject"](o.b),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-backup"]],decls:31,vars:17,consts:[["id","preloader-wrap",4,"ngIf"],[1,"col-md-12"],[1,"ms-panel"],[1,"ms-panel-body"],["name","backupform","class","row d-flex justify-content-between align-items-center","novalidate","",3,"ngSubmit",4,"ngIf"],[1,"ms-panel","mt-3"],[1,"py-1","mb-0"],["name","restoreform","novalidate","",1,"row","d-flex","align-items-center"],["restoreFrm","ngForm"],[1,"col-sm-12","col-md-6","d-flex","justify-content-center","align-items-center"],[1,"mx-1"],[1,"input-group","form-group","editInputGroup"],[1,"input-group-addon"],[1,"bi","bi-arrow-bar-down"],[1,"input-group"],["type","text","name","restorePath","required","","id","restorePath",1,"form-control","borderRadius",3,"placeholder","ngModel","ngModelChange"],["restorePathRef","ngModel"],["class","",4,"ngIf"],[1,"col-sm-12","col-md-3","d-flex","justify-content-between","align-items-center","form-group"],["type","button","name","restore",1,"btn","btnEdit","m-0","bg-success","shadow-none","btnWAA",3,"disabled","click"],[1,"fas","fa-undo"],["id","preloader-wrap"],[1,"col-md-9","d-flex","justify-content-center","align-items-center"],[1,"new-spinner"],["name","backupform","novalidate","",1,"row","d-flex","justify-content-between","align-items-center",3,"ngSubmit"],["frmRef","ngForm"],[1,"form-row","col-12","pt-0","mb-4"],[1,"col-md-6","py-2"],[1,"row","align-items-center","form-group","mb-0"],[1,"col-md-6"],["for","Duration"],[1,"input-group","borderRadius","editInputGroup"],[1,"fas","fa-window-restore"],["name","BackupDurationType","placeholder","Backup Duration Types","id","BackupDurationType_id",1,"form-control","borderRadius",3,"ngModel","allowFiltering","autofill","dataSource","disabled","fields","ngModelChange"],["BackupDurationType","ngModel"],[1,"col-md-2","d-flex"],["for","Duration",1,"m-0"],[1,"col-md-4"],[1,"fas","fa-hourglass-half"],["type","number","id","BackupDuration","name","BackupDuration","aria-describedby","emailHelp","placeholder","Duration",1,"form-control","borderRadius",3,"ngModel","disabled","max","ngModelChange"],["BackupDuration","ngModel"],[1,"align-items-center","d-flex","justify-content-center","w-75","m-0"],[1,"col-sm-12","col-md-4","d-flex","justify-content-center","align-items-center"],[1,"bi","bi-arrow-bar-up"],["type","text","placeholder","Path","name","path","required","","id","path",1,"form-control","borderRadius",3,"ngModel","disabled","ngModelChange"],["path","ngModel"],["type","button","name","pull","class","btn btnEdit bg-blue shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull","class","btn btnEdit bg-danger shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull","class","btn btnEdit bg-success shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull",1,"btn","btnEdit","m-0","bg-Orange","shadow-none","btnWAA",3,"click"],[1,"fas","fa-wordpress-simple"],[1,""],["class","alert alert-danger editAlertCash",4,"ngIf"],[1,"alert","alert-danger","editAlertCash"],["type","button","name","pull",1,"btn","btnEdit","bg-blue","shadow-none","form-group",3,"click"],[1,"fas"],["type","button","name","pull",1,"btn","btnEdit","bg-danger","shadow-none","form-group",3,"click"],["type","button","name","pull",1,"btn","btnEdit","bg-success","shadow-none","form-group",3,"click"]],template:function(e,t){if(1&e&&(l["\u0275\u0275template"](0,h,9,0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275template"](4,k,57,33,"form",4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"div",1),l["\u0275\u0275elementStart"](6,"div",5),l["\u0275\u0275elementStart"](7,"div",1),l["\u0275\u0275elementStart"](8,"h4",6),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",3),l["\u0275\u0275elementStart"](12,"form",7,8),l["\u0275\u0275elementStart"](14,"div",9),l["\u0275\u0275elementStart"](15,"label",10),l["\u0275\u0275text"](16),l["\u0275\u0275pipe"](17,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"div",11),l["\u0275\u0275elementStart"](19,"div",12),l["\u0275\u0275element"](20,"i",13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"div",14),l["\u0275\u0275elementStart"](22,"input",15,16),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.restorePath=e}),l["\u0275\u0275pipe"](24,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](25,w,2,1,"div",17),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"div",18),l["\u0275\u0275elementStart"](27,"button",19),l["\u0275\u0275listener"]("click",function(){return t.restore()}),l["\u0275\u0275element"](28,"i",20),l["\u0275\u0275text"](29),l["\u0275\u0275pipe"](30,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275reference"](13),n=l["\u0275\u0275reference"](23);l["\u0275\u0275property"]("ngIf",t.requestStarted),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",!!t.backupModel),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](10,9,"PosSettings.RestoreBackup")," :"),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](17,11,"PosSettings.BackupPathToRestore")),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("placeholder",l["\u0275\u0275pipeBind1"](24,13,"PosSettings.BackupPathToRestore"))("ngModel",t.restorePath),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",e.submitted&&n.invalid||n.invalid&&n.touched),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!t.restorePath),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](30,15,"PosSettings.Restore")," ")}},directives:[r.NgIf,a.C,a.s,a.t,a.c,a.z,a.r,a.u,b.a,a.w,a.l],pipes:[s.d],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[o.f.forChild(y)],o.f]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,I,a.j,a.y,i.a]]}),e})()}}]);