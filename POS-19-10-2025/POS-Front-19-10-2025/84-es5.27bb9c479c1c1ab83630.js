!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{E9N0:function(t,r,a){"use strict";a.r(r),a.d(r,"BackupsModule",function(){return V});var i,o=a("ofXK"),l=a("3Pt+"),d=a("PCNd"),s=a("tyNb"),u=a("fXoL"),c=a("sYmb"),p=a("A4Bx"),m=((i=function(){function t(n,r){e(this,t),this.http=n,this.common=r}return n(t,[{key:"backup",value:function(){return this.http.get(this.common.rooturl+"/Backup/Backup")}},{key:"firstOpen",value:function(){return this.http.get(this.common.rooturl+"/Backup/FirstOpen")}},{key:"updatePOSToLastVersion",value:function(){return this.http.get(this.common.rooturl+"/Backup/UpdatePOSToLastVersion")}},{key:"update",value:function(e){return this.http.put(this.common.rooturl+"/Backup/Update",e)}},{key:"restore",value:function(e){return this.http.post(this.common.rooturl+"/Backup/Restore",e)}}]),t}()).\u0275fac=function(e){return new(e||i)(u["\u0275\u0275inject"](p.c),u["\u0275\u0275inject"](p.a))},i.\u0275prov=u["\u0275\u0275defineInjectable"]({token:i,factory:i.\u0275fac,providedIn:"root"}),i),f=a("5eHb"),b=a("E8vI"),v=a("R9YG"),g=a("jcQU");function h(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",21),u["\u0275\u0275elementStart"](1,"div",22),u["\u0275\u0275elementStart"](2,"div",23),u["\u0275\u0275element"](3,"div"),u["\u0275\u0275element"](4,"div"),u["\u0275\u0275element"](5,"div"),u["\u0275\u0275element"](6,"div"),u["\u0275\u0275element"](7,"div"),u["\u0275\u0275element"](8,"div"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function S(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",53),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"Shared.URLIsrequired")," "))}function k(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",51),u["\u0275\u0275template"](1,S,3,3,"div",52),u["\u0275\u0275elementEnd"]()),2&e){u["\u0275\u0275nextContext"]();var n=u["\u0275\u0275reference"](46);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",n.errors.required)}}function y(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",54),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.show=!1,e.disabled=!1}),u["\u0275\u0275element"](1,"i",55),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,1,"pagetransactions.Edit")," "))}function E(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",56),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.show=!0,e.disabled=!0}),u["\u0275\u0275element"](1,"i",55),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,1,"pagetransactions.undo")," "))}function x(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",57),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.update(e.backupModel),e.show=!0,e.disabled=!0}),u["\u0275\u0275element"](1,"i",55),u["\u0275\u0275text"](2),u["\u0275\u0275pipe"](3,"translate"),u["\u0275\u0275elementEnd"]()}2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](3,1,"Shared.Save")," "))}function w(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"form",24,25),u["\u0275\u0275listener"]("ngSubmit",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275reference"](1).form.valid}),u["\u0275\u0275elementStart"](2,"div",26),u["\u0275\u0275elementStart"](3,"div",1),u["\u0275\u0275elementStart"](4,"h4",6),u["\u0275\u0275text"](5),u["\u0275\u0275pipe"](6,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",27),u["\u0275\u0275elementStart"](8,"div",28),u["\u0275\u0275elementStart"](9,"div",29),u["\u0275\u0275elementStart"](10,"label",30),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"div",29),u["\u0275\u0275elementStart"](14,"div",31),u["\u0275\u0275elementStart"](15,"div",12),u["\u0275\u0275element"](16,"i",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",14),u["\u0275\u0275elementStart"](18,"ejs-combobox",33,34),u["\u0275\u0275listener"]("ngModelChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().backupModel.BackupDurationType=e}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"div",27),u["\u0275\u0275elementStart"](21,"div",28),u["\u0275\u0275elementStart"](22,"div",35),u["\u0275\u0275elementStart"](23,"label",36),u["\u0275\u0275text"](24),u["\u0275\u0275pipe"](25,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",37),u["\u0275\u0275elementStart"](27,"div",31),u["\u0275\u0275elementStart"](28,"div",12),u["\u0275\u0275element"](29,"i",38),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](30,"div",14),u["\u0275\u0275elementStart"](31,"input",39,40),u["\u0275\u0275listener"]("ngModelChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().backupModel.BackupDuration=e}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"label",41),u["\u0275\u0275text"](34),u["\u0275\u0275pipe"](35,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](36,"hr"),u["\u0275\u0275elementStart"](37,"div",42),u["\u0275\u0275elementStart"](38,"label",10),u["\u0275\u0275text"](39),u["\u0275\u0275pipe"](40,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](41,"div",11),u["\u0275\u0275elementStart"](42,"div",12),u["\u0275\u0275element"](43,"i",43),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"div",14),u["\u0275\u0275elementStart"](45,"input",44,45),u["\u0275\u0275listener"]("ngModelChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().backupModel.Path=e}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](47,k,2,1,"div",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](48,"div",18),u["\u0275\u0275template"](49,y,4,3,"button",46),u["\u0275\u0275template"](50,E,4,3,"button",47),u["\u0275\u0275template"](51,x,4,3,"button",48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](52,"div",18),u["\u0275\u0275elementStart"](53,"button",49),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().backup()}),u["\u0275\u0275element"](54,"i",50),u["\u0275\u0275text"](55),u["\u0275\u0275pipe"](56,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var r=u["\u0275\u0275reference"](1),a=u["\u0275\u0275reference"](46),i=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"]("",u["\u0275\u0275pipeBind1"](6,21,"PosSettings.backupDurationOption")," :"),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](12,23,"PosSettings.backupDurationTypes")," "),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngModel",i.backupModel.BackupDurationType)("allowFiltering",!0)("autofill",!0)("dataSource",i.backupDurationTypes)("disabled",i.disabled)("fields",i.fields),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](25,25,"Shared.Every")," "),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngModel",i.backupModel.BackupDuration)("disabled",i.disabled)("max",5),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](35,27,1==i.backupModel.BackupDurationType?"Shared.Hour":"Shared.Day")," "),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](40,29,"Shared.Path")," "),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngModel",i.backupModel.Path)("disabled",i.disabled),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",r.submitted&&a.invalid||a.invalid&&a.touched),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",i.show),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!i.show),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!i.show),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](56,31,"Shared.doBackup")," ")}}function I(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",53),u["\u0275\u0275text"](1),u["\u0275\u0275pipe"](2,"translate"),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](2,1,"Shared.URLIsrequired")," "))}function M(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",51),u["\u0275\u0275template"](1,I,3,3,"div",52),u["\u0275\u0275elementEnd"]()),2&e){u["\u0275\u0275nextContext"]();var n=u["\u0275\u0275reference"](23);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.errors?null:n.errors.required)}}var B,C,P,j=[{path:"",component:(B=function(){function t(n,r,a,i,o,l){var d=this;e(this,t),this.translate=n,this.backupService=r,this.toastr=a,this.router=i,this.toastrMessage=o,this.languageSerService=l,this.fields={text:"Name",value:"Id"},this.restorePath="",this.languageSerService.currentLang.subscribe(function(e){return d.language=e}),this.translate.use(this.language)}return n(t,[{key:"ngOnInit",value:function(){this.show=!0,this.disabled=!0,this.firstOpen()}},{key:"updatePos",value:function(){this.isUpdating=!0,this.backupService.updatePOSToLastVersion().subscribe(function(e){},function(e){})}},{key:"firstOpen",value:function(){var e=this;this.backupService.firstOpen().subscribe(function(t){e.backupModel=t,e.currentVersion=t.currentVersion,e.latestVersion=t.latestVersion,e.backupDurationTypes=[{Id:1,Name:e.translate.instant("setting.Hours")},{Id:2,Name:e.translate.instant("setting.Days")}]})}},{key:"backup",value:function(){var e=this;this.requestStarted||(this.requestStarted=!0,this.backupService.backup().subscribe(function(t){e.requestStarted=!1,2==t?e.toastr.success(e.translate.instant("Shared.doBackup"),e._pagename):e.toastr.error(e.toastrMessage.GlobalMessages(t),e._pagename)},function(t){e.requestStarted=!1}))}},{key:"update",value:function(e){var t=this;this.backupService.update(e).subscribe(function(e){2==e?t.toastr.success(t.toastrMessage.GlobalMessages(e),t._pagename):t.toastr.error(t.toastrMessage.GlobalMessages(e),t._pagename)})}},{key:"restore",value:function(){var e=this;this.requestStarted||(this.requestStarted=!0,this.backupService.restore({Path:this.restorePath}).subscribe(function(t){e.requestStarted=!1,2==t?e.toastr.success(e.toastrMessage.GlobalMessages(t),e._pagename):e.toastr.error(e.toastrMessage.GlobalMessages(t),e._pagename),e.logout()},function(t){e.requestStarted=!1}))}},{key:"logout",value:function(){var e=this;localStorage.removeItem("token"),setTimeout(function(){e.router.navigateByUrl("/login"),location.reload()},200)}}]),t}(),B.\u0275fac=function(e){return new(e||B)(u["\u0275\u0275directiveInject"](c.e),u["\u0275\u0275directiveInject"](m),u["\u0275\u0275directiveInject"](f.b),u["\u0275\u0275directiveInject"](s.b),u["\u0275\u0275directiveInject"](b.a),u["\u0275\u0275directiveInject"](v.a))},B.\u0275cmp=u["\u0275\u0275defineComponent"]({type:B,selectors:[["app-backup"]],decls:31,vars:17,consts:[["id","preloader-wrap",4,"ngIf"],[1,"col-md-12"],[1,"ms-panel"],[1,"ms-panel-body"],["name","backupform","class","row d-flex justify-content-between align-items-center","novalidate","",3,"ngSubmit",4,"ngIf"],[1,"ms-panel","mt-3"],[1,"py-1","mb-0"],["name","restoreform","novalidate","",1,"row","d-flex","align-items-center"],["restoreFrm","ngForm"],[1,"col-sm-12","col-md-6","d-flex","justify-content-center","align-items-center"],[1,"mx-1"],[1,"input-group","form-group","editInputGroup"],[1,"input-group-addon"],[1,"bi","bi-arrow-bar-down"],[1,"input-group"],["type","text","name","restorePath","required","","id","restorePath",1,"form-control","borderRadius",3,"placeholder","ngModel","ngModelChange"],["restorePathRef","ngModel"],["class","",4,"ngIf"],[1,"col-sm-12","col-md-3","d-flex","justify-content-between","align-items-center","form-group"],["type","button","name","restore",1,"btn","btnEdit","m-0","bg-success","shadow-none","btnWAA",3,"disabled","click"],[1,"fas","fa-undo"],["id","preloader-wrap"],[1,"col-md-9","d-flex","justify-content-center","align-items-center"],[1,"new-spinner"],["name","backupform","novalidate","",1,"row","d-flex","justify-content-between","align-items-center",3,"ngSubmit"],["frmRef","ngForm"],[1,"form-row","col-12","pt-0","mb-4"],[1,"col-md-6","py-2"],[1,"row","align-items-center","form-group","mb-0"],[1,"col-md-6"],["for","Duration"],[1,"input-group","borderRadius","editInputGroup"],[1,"fas","fa-window-restore"],["name","BackupDurationType","placeholder","Backup Duration Types","id","BackupDurationType_id",1,"form-control","borderRadius",3,"ngModel","allowFiltering","autofill","dataSource","disabled","fields","ngModelChange"],["BackupDurationType","ngModel"],[1,"col-md-2","d-flex"],["for","Duration",1,"m-0"],[1,"col-md-4"],[1,"fas","fa-hourglass-half"],["type","number","id","BackupDuration","name","BackupDuration","aria-describedby","emailHelp","placeholder","Duration",1,"form-control","borderRadius",3,"ngModel","disabled","max","ngModelChange"],["BackupDuration","ngModel"],[1,"align-items-center","d-flex","justify-content-center","w-75","m-0"],[1,"col-sm-12","col-md-4","d-flex","justify-content-center","align-items-center"],[1,"bi","bi-arrow-bar-up"],["type","text","placeholder","Path","name","path","required","","id","path",1,"form-control","borderRadius",3,"ngModel","disabled","ngModelChange"],["path","ngModel"],["type","button","name","pull","class","btn btnEdit bg-blue shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull","class","btn btnEdit bg-danger shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull","class","btn btnEdit bg-success shadow-none form-group",3,"click",4,"ngIf"],["type","button","name","pull",1,"btn","btnEdit","m-0","bg-Orange","shadow-none","btnWAA",3,"click"],[1,"fas","fa-wordpress-simple"],[1,""],["class","alert alert-danger editAlertCash",4,"ngIf"],[1,"alert","alert-danger","editAlertCash"],["type","button","name","pull",1,"btn","btnEdit","bg-blue","shadow-none","form-group",3,"click"],[1,"fas"],["type","button","name","pull",1,"btn","btnEdit","bg-danger","shadow-none","form-group",3,"click"],["type","button","name","pull",1,"btn","btnEdit","bg-success","shadow-none","form-group",3,"click"]],template:function(e,t){if(1&e&&(u["\u0275\u0275template"](0,h,9,0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275template"](4,w,57,33,"form",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",1),u["\u0275\u0275elementStart"](6,"div",5),u["\u0275\u0275elementStart"](7,"div",1),u["\u0275\u0275elementStart"](8,"h4",6),u["\u0275\u0275text"](9),u["\u0275\u0275pipe"](10,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"div",3),u["\u0275\u0275elementStart"](12,"form",7,8),u["\u0275\u0275elementStart"](14,"div",9),u["\u0275\u0275elementStart"](15,"label",10),u["\u0275\u0275text"](16),u["\u0275\u0275pipe"](17,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",11),u["\u0275\u0275elementStart"](19,"div",12),u["\u0275\u0275element"](20,"i",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",14),u["\u0275\u0275elementStart"](22,"input",15,16),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.restorePath=e}),u["\u0275\u0275pipe"](24,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](25,M,2,1,"div",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"div",18),u["\u0275\u0275elementStart"](27,"button",19),u["\u0275\u0275listener"]("click",function(){return t.restore()}),u["\u0275\u0275element"](28,"i",20),u["\u0275\u0275text"](29),u["\u0275\u0275pipe"](30,"translate"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275reference"](13),r=u["\u0275\u0275reference"](23);u["\u0275\u0275property"]("ngIf",t.requestStarted),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",!!t.backupModel),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate1"]("",u["\u0275\u0275pipeBind1"](10,9,"PosSettings.RestoreBackup")," :"),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](17,11,"PosSettings.BackupPathToRestore")),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("placeholder",u["\u0275\u0275pipeBind1"](24,13,"PosSettings.BackupPathToRestore"))("ngModel",t.restorePath),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("ngIf",n.submitted&&r.invalid||r.invalid&&r.touched),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("disabled",!t.restorePath),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",u["\u0275\u0275pipeBind1"](30,15,"PosSettings.Restore")," ")}},directives:[o.NgIf,l.C,l.s,l.t,l.c,l.z,l.r,l.u,g.a,l.w,l.l],pipes:[c.d],styles:[""]}),B)}],D=((P=function t(){e(this,t)}).\u0275fac=function(e){return new(e||P)},P.\u0275mod=u["\u0275\u0275defineNgModule"]({type:P}),P.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[s.f.forChild(j)],s.f]}),P),V=((C=function t(){e(this,t)}).\u0275fac=function(e){return new(e||C)},C.\u0275mod=u["\u0275\u0275defineNgModule"]({type:C}),C.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,D,l.j,l.y,d.a]]}),C)}}])}();