!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,d=e[Symbol.iterator]();!(a=(o=d.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(l){r=!0,i=l}finally{try{a||null==d.return||d.return()}finally{if(r)throw i}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{tNlC:function(n,a,o){"use strict";o.r(a),o.d(a,"NewDashboardModule",function(){return U});var d=o("ofXK"),l=o("3Pt+"),s=o("PCNd"),p=o("tyNb"),c=o("mrSG"),u=function e(){i(this,e),this.Kpis=[],this.OrdersCompare=[],this.OrderTypesCompare=[],this.Hours=[],this.SmartInsights=[],this.TopProducts={},this.TopBranches={},this.UserSales={}},m=function(e){return e[e.Cash=10]="Cash",e[e.Credit=20]="Credit",e[e.Visa=30]="Visa",e[e.Free=50]="Free",e[e.CashBack=70]="CashBack",e}({}),h=function(e){return e[e.Orders=1]="Orders",e[e.ReturnOrders=2]="ReturnOrders",e[e.NetSales=3]="NetSales",e[e.CashReceipt=4]="CashReceipt",e[e.ExtraExpenses=5]="ExtraExpenses",e}({}),f=o("un1/"),v=o("fXoL"),g=o("xPZZ"),b=o("uU2i"),y=o("sYmb");function x(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"div",37),v["\u0275\u0275elementStart"](1,"div",38),v["\u0275\u0275elementStart"](2,"div",39),v["\u0275\u0275element"](3,"div"),v["\u0275\u0275element"](4,"div"),v["\u0275\u0275element"](5,"div"),v["\u0275\u0275element"](6,"div"),v["\u0275\u0275element"](7,"div"),v["\u0275\u0275element"](8,"div"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",40),v["\u0275\u0275elementStart"](1,"label",41),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"input",42),v["\u0275\u0275listener"]("ngModelChange",function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().filters.Date=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](3,2,"Reports.Date"),":"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",a.filters.Date)}}function C(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",43),v["\u0275\u0275elementStart"](1,"label",44),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"input",45),v["\u0275\u0275listener"]("ngModelChange",function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().filters.Week=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](3,2,"Dashboard.Week"),":"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",a.filters.Week)}}function E(e,t){if(1&e){var n=v["\u0275\u0275getCurrentView"]();v["\u0275\u0275elementStart"](0,"div",46),v["\u0275\u0275elementStart"](1,"label",47),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"input",48),v["\u0275\u0275listener"]("ngModelChange",function(e){return v["\u0275\u0275restoreView"](n),v["\u0275\u0275nextContext"]().filters.Month=e}),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()}if(2&e){var a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](3,2,"Dashboard.Month"),":"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",a.filters.Month)}}function I(e,t){1&e&&(v["\u0275\u0275elementStart"](0,"span"),v["\u0275\u0275text"](1,"|"),v["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"span"),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](4,I,2,0,"span",54),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=v["\u0275\u0275nextContext"]().$implicit,r=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate3"](" ",n.Icon," ",n.PayName,": ",v["\u0275\u0275pipeBind2"](3,4,n.Amount,r.fraction)," "),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf",!r.isLastPayment(a.Payments,n))}}function w(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",52),v["\u0275\u0275text"](1),v["\u0275\u0275pipe"](2,"translate"),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]().$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate2"]("\ud83d\udce6 ",v["\u0275\u0275pipeBind1"](2,2,"Shared.count")," : ",n.Count,"")}}var T=function(){return[]};function O(e,t){if(1&e&&(v["\u0275\u0275elementContainerStart"](0),v["\u0275\u0275elementStart"](1,"div",49),v["\u0275\u0275elementStart"](2,"div",50),v["\u0275\u0275text"](3),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"div",51),v["\u0275\u0275text"](5),v["\u0275\u0275pipe"](6,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](7,"div",52),v["\u0275\u0275template"](8,D,5,7,"ng-container",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](9,w,3,4,"div",53),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](1),v["\u0275\u0275classMap"](n.BorderClass),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](n.Name),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](6,6,n.TotalAmount,a.fraction)),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",n.Payments||v["\u0275\u0275pureFunction0"](9,T)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",3!=n.Type)}}function P(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr",55),v["\u0275\u0275elementStart"](1,"td",17),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"td",17),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"td",17),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"td",56),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](12,"td",56),v["\u0275\u0275text"](13),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](n.Name),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](5,7,n.OrdersForPerid,a.fraction)),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](8,10,n.OrdersLastPerid,a.fraction)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",n.Color),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind2"](11,13,n.Percentage,"1.0"),"%"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",n.Color),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](n.Icon)}}var B=function(e){return{"text-end text-success":e}};function k(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr",55),v["\u0275\u0275elementStart"](1,"td",17),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"td",17),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"td",17),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"td",56),v["\u0275\u0275text"](10),v["\u0275\u0275pipe"](11,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=v["\u0275\u0275nextContext"](2);v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](n.BranchName),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](5,5,n.TargetAmount,a.fraction)),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](8,8,n.TargetActualAmount,a.fraction)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",v["\u0275\u0275pureFunction1"](14,B,n.Percentage>=100)),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind2"](11,11,n.Percentage,"1.0"),"%")}}function F(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"div",13),v["\u0275\u0275elementStart"](1,"h2",14),v["\u0275\u0275text"](2),v["\u0275\u0275pipe"](3,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](4,"table",15),v["\u0275\u0275elementStart"](5,"thead",16),v["\u0275\u0275elementStart"](6,"tr"),v["\u0275\u0275elementStart"](7,"th",17),v["\u0275\u0275text"](8),v["\u0275\u0275pipe"](9,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"th",17),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"th",17),v["\u0275\u0275text"](14),v["\u0275\u0275pipe"](15,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](16,"th",17),v["\u0275\u0275text"](17),v["\u0275\u0275pipe"](18,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](19,"tbody"),v["\u0275\u0275template"](20,k,12,16,"tr",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate2"]("\ud83d\ude80 ",v["\u0275\u0275pipeBind1"](3,7,"Dashboard.TargetForMonth")," ' ",n.dashboardData.SalesTarget.PeriodName," '"),v["\u0275\u0275advance"](6),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](9,9,"Layout.Branch")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,11,"Shared.SalesTarget")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](15,13,"Reports.ActualAmount")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](18,15,"Shared.Percentage")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",(null==n.dashboardData.SalesTarget?null:n.dashboardData.SalesTarget.TargetBranches)||v["\u0275\u0275pureFunction0"](17,T))}}function A(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"tr",55),v["\u0275\u0275elementStart"](1,"td",17),v["\u0275\u0275text"](2),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](3,"td",17),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"td",17),v["\u0275\u0275text"](7),v["\u0275\u0275pipe"](8,"number"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](9,"td",56),v["\u0275\u0275text"](10),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](11,"td",56),v["\u0275\u0275text"](12),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=v["\u0275\u0275nextContext"]();v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](n.Name),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](5,7,n.OrdersForPerid,a.fraction)),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind2"](8,10,n.OrdersLastPerid,a.fraction)),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngClass",n.Color),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate1"]("",n.Percentage,"%"),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngClass",n.Color),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](n.Icon)}}function M(e,t){if(1&e&&(v["\u0275\u0275elementStart"](0,"li"),v["\u0275\u0275text"](1),v["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](n)}}var j,L,N,H=[{path:"",component:(j=function(){function n(e,t,a,r){var o=this;i(this,n),this.renderer=e,this.dashboardService=t,this.languageSerService=a,this.translate=r,this.fraction="1.2-2",this.filters={FilterType:"daily",Date:Object(f.f)(new Date)},this.language="en",this.requestStarted=!1,this.loadedScriptElement=[],this.dashboardData=new u,this.loadData(),this.languageSerService.currentLang.subscribe(function(e){return o.language=e}),this.translate.use(this.language),this.applyFilters()}var a,o,d;return a=n,(o=[{key:"getPaymentIcon",value:function(e){switch(e){case m.Credit:return"\ud83e\uddfe";case m.Cash:return"\ud83d\udcb3";case m.Visa:return"\ud83d\udcb5";default:return"\ud83d\udcb0"}}},{key:"getKpiBorderClass",value:function(e){switch(e){case h.Orders:return"border-blue-700";case h.ReturnOrders:return"border-red-600";case h.NetSales:return"border-green-600";case h.CashReceipt:return"border-yellow-600";case h.ExtraExpenses:return"border-purple-600";default:return"border-gray-600"}}},{key:"loadData",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadAssets();case 2:this.handleData();case 3:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){var e,t=this;try{(null===(e=this.loadedScriptElement)||void 0===e?void 0:e.length)&&this.loadedScriptElement.forEach(function(e){return t.renderer.removeChild(document.body,e)});var n=window.Chart||Chart;this.distroyOldCanvases(["ordersHourChart","hourlySalesChart","paymentChart","discountChart","invoiceTypeChart","topProductsChart","topPaymentsChart","topBranchesChart","topUsersChart"],n)}catch(a){}}},{key:"ngAfterViewInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))}},{key:"loadScript",value:function(e){var t=this;return new Promise(function(n,a){var r=t.renderer.createElement("script");r.src=e,r.async=!0,r.onload=function(){return n()},r.onerror=function(){return a()},t.renderer.appendChild(document.body,r),t.loadedScriptElement.push(r)})}},{key:"loadAssets",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadCss("assets/sass/tailwind/tailwind.css"),e.next=3,Promise.all([this.loadScript("assets/js/jsdelivr.js")]);case 3:console.log("\u2705 All scripts loaded");case 4:case"end":return e.stop()}},e,this)}))}},{key:"loadCss",value:function(e){var t=this.renderer.createElement("link");t.rel="stylesheet",t.href=e,this.renderer.appendChild(document.head,t)}},{key:"initDashboard",value:function(){var e,n,a=this,r=this.dashboardData.OrdersCompare.reduce(function(e,t){return e[t.Name]=t.OrdersForPerid||0,e},{}),i=this.dashboardData.Hours.map(function(e){return e.Hour||""}),o=this.dashboardData.Hours.map(function(e){return e.Count||0}),d=this.dashboardData.Hours.map(function(e){return e.Amount||0}),l=this.dashboardData.Hours.map(function(e){return e.Discount||0}),s=(null===(e=this.dashboardData.Kpis.find(function(e){return e.Type===h.Orders}))||void 0===e?void 0:e.Payments.reduce(function(e,t){return e[t.PayName]=t.Amount,e},{}))||{},p=this.dashboardData.TopProducts||{},c=this.dashboardData.TopBranches||{},u=this.dashboardData.UserSales||{};n=window.Chart||Chart,a.distroyOldCanvases(["ordersHourChart","hourlySalesChart","paymentChart","discountChart","invoiceTypeChart","topProductsChart","topPaymentsChart","topBranchesChart","topUsersChart"],n),new n(document.getElementById("ordersHourChart"),{type:"bar",data:{labels:i,datasets:[{label:a.translate.instant("Dashboard.OrdersCount"),data:o,backgroundColor:"#2563eb"}]}}),new n(document.getElementById("hourlySalesChart"),{type:"bar",data:{labels:i,datasets:[{label:a.translate.instant("Dashboard.OrdersAmount"),data:d,backgroundColor:"#1e40af"}]}}),new n(document.getElementById("paymentChart"),{type:"doughnut",data:{labels:Object.keys(s),datasets:[{data:Object.values(s),backgroundColor:["#3b82f6","#8b5cf6","#f59e0b","#10b981"]}]}}),new n(document.getElementById("discountChart"),{type:"bar",data:{labels:i,datasets:[{label:a.translate.instant("Dashboard.Discounts"),data:l,backgroundColor:"#f97316"}]}}),new n(document.getElementById("invoiceTypeChart"),{type:"pie",data:{labels:Object.keys(r),datasets:[{data:Object.values(r),backgroundColor:["#2563eb","#ef4444","#f59e0b"]}]}}),new n(document.getElementById("topProductsChart"),{type:"bar",data:{labels:Object.keys(p),datasets:[{label:a.translate.instant("Dashboard.BestPerformanceProducts"),data:Object.values(p),backgroundColor:"#2563eb"}]},options:{indexAxis:"y"}}),new n(document.getElementById("topPaymentsChart"),{type:"bar",data:{labels:Object.keys(s),datasets:[{label:a.translate.instant("Dashboard.TopPaymentMethods"),data:Object.values(s),backgroundColor:"#f59e0b"}]},options:{indexAxis:"y"}}),new n(document.getElementById("topBranchesChart"),{type:"bar",data:{labels:Object.keys(c),datasets:[{label:a.translate.instant("Dashboard.TopBranches"),data:Object.values(c),backgroundColor:"#10b981"}]},options:{indexAxis:"y"}}),new n(document.getElementById("topUsersChart"),{type:"bar",data:{labels:Object.keys(u),datasets:[{label:a.translate.instant("Dashboard.TopSellingUsers"),data:Object.values(u),backgroundColor:"#0ea5e9"}]},options:{indexAxis:"y"}}),function(){var e=document.getElementById("userPercentages");if(e){var n=Object.values(u).reduce(function(e,t){return e+t},0),r="";Object.entries(u).forEach(function(e){var i=t(e,2),o=i[0],d=i[1]/n*100,l=a.translate.instant("Dashboard.UserSellPerc").replace("{0}",o).replace("{1}",d.toFixed(1));r+="<div>".concat(l,"</div>")}),e.innerHTML=r}}()}},{key:"distroyOldCanvases",value:function(e,t){e.forEach(function(e){var n=document.getElementById(e);if(n)try{if(t&&"function"==typeof t.getChart){var a=t.getChart(n);a&&a.destroy()}else t.instances&&(Array.isArray(t.instances)?t.instances:t.instances.values?Array.from(t.instances.values()):[]).forEach(function(t){try{t&&t.canvas&&t.canvas.id===e&&t.destroy()}catch(n){}})}catch(r){}})}},{key:"isLastPayment",value:function(e,t){return e.indexOf(t)===e.length-1}},{key:"getOrdersComparisonIcon",value:function(e){return e.Icon=e.OrdersForPerid>e.OrdersLastPerid?"\ud83d\udd3c":e.OrdersForPerid<e.OrdersLastPerid?"\ud83d\udd3b":"\u2796",e.Percentage=e.OrdersLastPerid&&0!==e.OrdersLastPerid?(e.OrdersForPerid-e.OrdersLastPerid)/e.OrdersLastPerid*100:0,e.Percentage=Math.round(10*e.Percentage)/10,e.Color=e.Percentage>0?"text-green-600":e.Percentage<0?"text-red-600":"text-gray-600",e.Icon}},{key:"handleData",value:function(){var e,t,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.dashboardData.Kpis.forEach(function(e){e.Name=n.translate.instant("Screens.".concat(h[e.Type])),e.TotalAmount=e.Payments.reduce(function(e,t){return e+t.Amount},0),e.BorderClass=n.getKpiBorderClass(e.Type),e.Payments.forEach(function(e){e.Icon=n.getPaymentIcon(e.PayType)})});var r=(null===(e=this.dashboardData.Kpis.find(function(e){return e.Type===h.Orders}))||void 0===e?void 0:e.TotalAmount)||0,i=(null===(t=this.dashboardData.Kpis.find(function(e){return e.Type===h.ReturnOrders}))||void 0===t?void 0:t.TotalAmount)||0,o=this.dashboardData.Kpis.find(function(e){return e.Type===h.NetSales});o&&(o.TotalAmount=r-i),this.dashboardData.OrdersCompare.forEach(function(e){n.getOrdersComparisonIcon(e)}),this.dashboardData.OrderTypesCompare.forEach(function(e){n.getOrdersComparisonIcon(e)}),this.buildInsights(),setTimeout(function(){return n.initDashboard()},a)}},{key:"buildInsights",value:function(){var t,n,a;if(0!==this.dashboardData.Hours.length){var r=Math.max.apply(Math,e(this.dashboardData.Hours.map(function(e){return e.Amount||0}))),i=(null===(t=this.dashboardData.Hours.find(function(e){return e.Amount===r}))||void 0===t?void 0:t.Hour)||"";this.dashboardData.SmartInsights=[];var o=this.translate.instant("Dashboard.GreatestHour").replace("{0}",i).replace("{1}",r.toFixed(0));this.dashboardData.SmartInsights.push(o);var d=(this.dashboardData.Hours.reduce(function(e,t){return e+(t.Amount||0)},0)/this.dashboardData.Hours.length).toFixed(0),l=this.translate.instant("Dashboard.AvgSalesPerHour").replace("{0}",d);this.dashboardData.SmartInsights.push(l);var s=((null===(n=this.dashboardData.Kpis.find(function(e){return e.Type===h.ReturnOrders}))||void 0===n?void 0:n.TotalAmount)||0)/((null===(a=this.dashboardData.Kpis.find(function(e){return e.Type===h.Orders}))||void 0===a?void 0:a.TotalAmount)||1)*100;if(s>10){var p=this.translate.instant("Dashboard.ReturnRate").replace("{0}",s.toFixed(1));this.dashboardData.SmartInsights.push(p)}else{var c=this.translate.instant("Dashboard.GeneralPerformance");this.dashboardData.SmartInsights.push(c)}}}},{key:"applyFilters",value:function(){var e=this;try{this.requestStarted=!0,this.filters.Lang=this.language,this.dashboardService.getNewDashboard(this.filters).subscribe({next:function(t){e.requestStarted=!1,t&&(e.dashboardData=t,e.handleData())},error:function(t){e.requestStarted=!1,console.error("Failed to load dashboard with filters",t)}})}catch(t){this.requestStarted=!1,console.error(t)}}},{key:"periodToLastPeriodTitle",get:function(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.ThisWeekVsLastWeek");case"monthly":return this.translate.instant("Dashboard.ThisMonthVsLastMonth");default:return this.translate.instant("Dashboard.TodayVsYesterday")}}},{key:"comparisonPaymentTitle",get:function(){return this.translate.instant("Dashboard.ComparingSalesByType").replace("{0}",this.periodToLastPeriodTitle)}},{key:"comparisonOrderTypeTitle",get:function(){return this.translate.instant("Dashboard.ComparingInvoiceTypes").replace("{0}",this.periodToLastPeriodTitle)}},{key:"periodTitle",get:function(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.Week");case"monthly":return this.translate.instant("Dashboard.Month");default:return this.translate.instant("Dashboard.Day")}}},{key:"lastPeriodTitle",get:function(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.LastWeek");case"monthly":return this.translate.instant("Dashboard.LastMonth");default:return this.translate.instant("Dashboard.Yesterday")}}},{key:"useSalesTarget",get:function(){var e,t;return(null===(t=null===(e=this.dashboardData.SalesTarget)||void 0===e?void 0:e.TargetBranches)||void 0===t?void 0:t.length)>0}}])&&r(a.prototype,o),d&&r(a,d),n}(),j.\u0275fac=function(e){return new(e||j)(v["\u0275\u0275directiveInject"](v.Renderer2),v["\u0275\u0275directiveInject"](g.a),v["\u0275\u0275directiveInject"](b.d),v["\u0275\u0275directiveInject"](y.e))},j.\u0275cmp=v["\u0275\u0275defineComponent"]({type:j,selectors:[["app-new-dashboard"]],decls:131,vars:93,consts:[["id","preloader-wrap",4,"ngIf"],[1,"flex","flex-wrap","items-center","gap-3","p-4","bg-gray-200"],[1,"flex","items-center","gap-2"],["for","filterType",1,"font-semibold"],["id","filterType","name","filterType",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],[3,"ngValue"],["id","dateFilter","class","flex items-center gap-2",4,"ngIf"],["id","weekFilter","class","flex items-center gap-2",4,"ngIf"],["id","monthFilter","class","flex items-center gap-2",4,"ngIf"],["id","applyFilter",1,"bg-blue-900","text-white","px-4","py-2","rounded","hover:bg-blue-800",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-5","gap-4","p-4"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","gap-4","p-4",3,"ngClass"],[1,"card"],[1,"font-bold","mb-2"],[1,"w-full","text-sm","text-right","border"],[1,"bg-blue-100"],[1,"p-2"],["class","border-b",4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"bg-green-100"],[1,"p-4"],[1,"section-title","text-lg","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["id","ordersHourChart"],["id","hourlySalesChart"],["id","paymentChart"],["id","discountChart"],["id","invoiceTypeChart"],[1,"card","lg:col-span-3","bg-gray-50","pl-4"],["id","insightsList",1,"list-disc","pr-6","text-sm","leading-7"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],["id","topProductsChart"],["id","topPaymentsChart"],["id","topBranchesChart"],["id","topUsersChart"],["id","userPercentages",1,"mt-3","text-sm","text-gray-700","leading-6"],["id","preloader-wrap"],[1,"col-md-9","d-flex","justify-content-center","align-items-center"],[1,"new-spinner"],["id","dateFilter",1,"flex","items-center","gap-2"],["for","dateInput",1,"font-semibold"],["type","date","id","dateInput","name","dateInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],["id","weekFilter",1,"flex","items-center","gap-2"],["for","weekInput",1,"font-semibold"],["type","week","id","weekInput","name","weekInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],["id","monthFilter",1,"flex","items-center","gap-2"],["for","monthInput",1,"font-semibold"],["type","month","id","monthInput","name","monthInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],[1,"card2","border-t-4"],[1,"kpi-title"],[1,"kpi-value","text-blue-800"],[1,"mini-line"],["class","mini-line",4,"ngIf"],[4,"ngIf"],[1,"border-b"],[1,"p-2",3,"ngClass"]],template:function(e,t){1&e&&(v["\u0275\u0275template"](0,x,9,0,"div",0),v["\u0275\u0275elementStart"](1,"section",1),v["\u0275\u0275elementStart"](2,"div",2),v["\u0275\u0275elementStart"](3,"label",3),v["\u0275\u0275text"](4),v["\u0275\u0275pipe"](5,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](6,"select",4),v["\u0275\u0275listener"]("ngModelChange",function(e){return t.filters.FilterType=e}),v["\u0275\u0275elementStart"](7,"option",5),v["\u0275\u0275text"](8),v["\u0275\u0275pipe"](9,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](10,"option",5),v["\u0275\u0275text"](11),v["\u0275\u0275pipe"](12,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](13,"option",5),v["\u0275\u0275text"](14),v["\u0275\u0275pipe"](15,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](16,S,5,4,"div",6),v["\u0275\u0275template"](17,C,5,4,"div",7),v["\u0275\u0275template"](18,E,5,4,"div",8),v["\u0275\u0275elementStart"](19,"button",9),v["\u0275\u0275listener"]("click",function(){return t.applyFilters()}),v["\u0275\u0275text"](20),v["\u0275\u0275pipe"](21,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerStart"](22),v["\u0275\u0275elementStart"](23,"section",10),v["\u0275\u0275template"](24,O,10,10,"ng-container",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](25,"section",12),v["\u0275\u0275elementStart"](26,"div",13),v["\u0275\u0275elementStart"](27,"h2",14),v["\u0275\u0275text"](28),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](29,"table",15),v["\u0275\u0275elementStart"](30,"thead",16),v["\u0275\u0275elementStart"](31,"tr"),v["\u0275\u0275elementStart"](32,"th",17),v["\u0275\u0275text"](33),v["\u0275\u0275pipe"](34,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](35,"th",17),v["\u0275\u0275text"](36),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](37,"th",17),v["\u0275\u0275text"](38),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](39,"th",17),v["\u0275\u0275text"](40),v["\u0275\u0275pipe"](41,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](42,"th",17),v["\u0275\u0275text"](43),v["\u0275\u0275pipe"](44,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](45,"tbody"),v["\u0275\u0275template"](46,P,14,16,"tr",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275template"](47,F,21,18,"div",19),v["\u0275\u0275elementStart"](48,"div",13),v["\u0275\u0275elementStart"](49,"h2",14),v["\u0275\u0275text"](50),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](51,"table",15),v["\u0275\u0275elementStart"](52,"thead",20),v["\u0275\u0275elementStart"](53,"tr"),v["\u0275\u0275elementStart"](54,"th",17),v["\u0275\u0275text"](55),v["\u0275\u0275pipe"](56,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](57,"th",17),v["\u0275\u0275text"](58),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](59,"th",17),v["\u0275\u0275text"](60),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](61,"th",17),v["\u0275\u0275text"](62),v["\u0275\u0275pipe"](63,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](64,"th",17),v["\u0275\u0275text"](65),v["\u0275\u0275pipe"](66,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](67,"tbody"),v["\u0275\u0275template"](68,A,13,13,"tr",18),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](69,"section",21),v["\u0275\u0275elementStart"](70,"h2",22),v["\u0275\u0275text"](71),v["\u0275\u0275pipe"](72,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](73,"div",23),v["\u0275\u0275elementStart"](74,"div",13),v["\u0275\u0275elementStart"](75,"h3",14),v["\u0275\u0275text"](76),v["\u0275\u0275pipe"](77,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](78,"canvas",24),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](79,"div",13),v["\u0275\u0275elementStart"](80,"h3",14),v["\u0275\u0275text"](81),v["\u0275\u0275pipe"](82,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](83,"canvas",25),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](84,"div",13),v["\u0275\u0275elementStart"](85,"h3",14),v["\u0275\u0275text"](86),v["\u0275\u0275pipe"](87,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](88,"canvas",26),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](89,"div",13),v["\u0275\u0275elementStart"](90,"h3",14),v["\u0275\u0275text"](91),v["\u0275\u0275pipe"](92,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](93,"canvas",27),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](94,"div",13),v["\u0275\u0275elementStart"](95,"h3",14),v["\u0275\u0275text"](96),v["\u0275\u0275pipe"](97,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](98,"canvas",28),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](99,"div",29),v["\u0275\u0275elementStart"](100,"h3",14),v["\u0275\u0275text"](101),v["\u0275\u0275pipe"](102,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](103,"ul",30),v["\u0275\u0275template"](104,M,2,1,"li",11),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](105,"section",21),v["\u0275\u0275elementStart"](106,"h2",22),v["\u0275\u0275text"](107),v["\u0275\u0275pipe"](108,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](109,"div",31),v["\u0275\u0275elementStart"](110,"div",13),v["\u0275\u0275elementStart"](111,"h3",14),v["\u0275\u0275text"](112),v["\u0275\u0275pipe"](113,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](114,"canvas",32),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](115,"div",13),v["\u0275\u0275elementStart"](116,"h3",14),v["\u0275\u0275text"](117),v["\u0275\u0275pipe"](118,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](119,"canvas",33),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](120,"div",13),v["\u0275\u0275elementStart"](121,"h3",14),v["\u0275\u0275text"](122),v["\u0275\u0275pipe"](123,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](124,"canvas",34),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementStart"](125,"div",13),v["\u0275\u0275elementStart"](126,"h3",14),v["\u0275\u0275text"](127),v["\u0275\u0275pipe"](128,"translate"),v["\u0275\u0275elementEnd"](),v["\u0275\u0275element"](129,"canvas",35),v["\u0275\u0275element"](130,"div",36),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementEnd"](),v["\u0275\u0275elementContainerEnd"]()),2&e&&(v["\u0275\u0275property"]("ngIf",t.requestStarted),v["\u0275\u0275advance"](4),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](5,43,"Dashboard.FilterType"),":"),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngModel",t.filters.FilterType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngValue","daily"),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](9,45,"Dashboard.Daily")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue","weekly"),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](12,47,"Dashboard.Weekly")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngValue","monthly"),v["\u0275\u0275advance"](1),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](15,49,"Dashboard.Monthly")),v["\u0275\u0275advance"](2),v["\u0275\u0275property"]("ngIf","daily"===t.filters.FilterType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","weekly"===t.filters.FilterType),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf","monthly"===t.filters.FilterType),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"](" ",v["\u0275\u0275pipeBind1"](21,51,"Dashboard.ApplyFilter")," "),v["\u0275\u0275advance"](4),v["\u0275\u0275property"]("ngForOf",(null==t.dashboardData?null:t.dashboardData.Kpis)||v["\u0275\u0275pureFunction0"](89,T)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngClass",t.useSalesTarget?"md:grid-cols-3":"md:grid-cols-2"),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("\ud83d\udcc8 ",t.comparisonPaymentTitle,""),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](34,53,"Shared.type")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](t.periodTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](t.lastPeriodTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](41,55,"Dashboard.Differance"),"%"),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](44,57,"Shared.status")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.dashboardData.OrdersCompare||v["\u0275\u0275pureFunction0"](90,T)),v["\u0275\u0275advance"](1),v["\u0275\u0275property"]("ngIf",t.useSalesTarget),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("\ud83e\uddfe ",t.comparisonOrderTypeTitle,""),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](56,59,"Shared.type")),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](t.periodTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate"](t.lastPeriodTitle),v["\u0275\u0275advance"](2),v["\u0275\u0275textInterpolate1"]("",v["\u0275\u0275pipeBind1"](63,61,"Dashboard.Differance"),"%"),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](66,63,"Shared.status")),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",t.dashboardData.OrderTypesCompare||v["\u0275\u0275pureFunction0"](91,T)),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("\ud83d\udcca ",v["\u0275\u0275pipeBind1"](72,65,"Dashboard.AnalyticalCharts"),""),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](77,67,"Dashboard.OrdersPerHour")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](82,69,"Dashboard.OrdersAmountPerHour")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](87,71,"manageorder.Order Pay Types")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](92,73,"Dashboard.Discounts")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](97,75,"Dashboard.OrderTypesPercentages")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate1"]("\ud83d\udd14 ",v["\u0275\u0275pipeBind1"](102,77,"Dashboard.SmartInsights"),""),v["\u0275\u0275advance"](3),v["\u0275\u0275property"]("ngForOf",(null==t.dashboardData?null:t.dashboardData.SmartInsights)||v["\u0275\u0275pureFunction0"](92,T)),v["\u0275\u0275advance"](3),v["\u0275\u0275textInterpolate1"]("\ud83c\udfc6 ",v["\u0275\u0275pipeBind1"](108,79,"Dashboard.BestPerformance"),""),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](113,81,"Dashboard.BestPerformanceProducts")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](118,83,"Dashboard.TopPaymentMethods")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](123,85,"Dashboard.TopBranches")),v["\u0275\u0275advance"](5),v["\u0275\u0275textInterpolate"](v["\u0275\u0275pipeBind1"](128,87,"Dashboard.TopSellingUsers")))},directives:[d.NgIf,l.A,l.r,l.u,l.v,l.D,d.NgForOf,d.NgClass,l.c],pipes:[y.d,d.DecimalPipe],styles:["[_nghost-%COMP%]{font-family:Tajawal,sans-serif;display:block;background:#f3f4f6}.dashboard-root[_ngcontent-%COMP%]{direction:rtl}.card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 6px 18px -8px rgba(0,0,0,.2);padding:16px;background:#fff}.kpi-title[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem}.kpi-value[_ngcontent-%COMP%]{font-weight:800;font-size:1.6rem}.mini-line[_ngcontent-%COMP%]{font-size:.85rem;color:#4b5563}.section-title[_ngcontent-%COMP%]{font-weight:800}.chip[_ngcontent-%COMP%]{background:#e5e7eb;border-radius:999px;padding:.15rem .6rem;font-size:.8rem}.card2[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 6px 18px -8px rgba(0,0,0,.2);padding:16px;background:#fff}"]}),j)}],R=((N=function e(){i(this,e)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=v["\u0275\u0275defineNgModule"]({type:N}),N.\u0275inj=v["\u0275\u0275defineInjector"]({imports:[[p.f.forChild(H)],p.f]}),N),U=((L=function e(){i(this,e)}).\u0275fac=function(e){return new(e||L)},L.\u0275mod=v["\u0275\u0275defineNgModule"]({type:L}),L.\u0275inj=v["\u0275\u0275defineInjector"]({providers:[],imports:[[d.CommonModule,R,s.a,l.j]]}),L)},"un1/":function(e,t,n){"use strict";function a(e,t){var n=new Date("1970-01-01 ".concat(e)),a=new Date("1970-01-01 ".concat(t)),r=Math.abs(n.getTime()-a.getTime());return Math.floor(r/1e3)}function r(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());try{return JSON.parse(JSON.stringify(e))}catch(t){throw console.error("Deep copy failed for object:",e,t),new Error("Unable to deep copy object!")}}function i(e){e.Base.StiLicense.key="6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHlkHnETZDQa/PS+0KAqyGT4DpRlgFmGegaxKasr/6hj3WTsNszXi2AnvR96edDIZl0iQK5oAkmli4CDUblYqrhiAJUrUZtKyoZUOSwbjhyDdjuqCk8reDn/QTemFDwWuF4BfzOqXcdV9ceHmq8jqTiwrgF4Bc35HGUqPq+CnYqGQhfU3YY44xsR5JaAuLAXvuP05Oc6F9BQhBMqb6AUXjeD5T9OJWHiIacwv0LbxJAg5a1dVBDPR9E+nJu2dNxkG4EcLY4nf4tOvUh7uhose6Cp5nMlpfXUnY7k7Lq9r0XE/b+q1f11KCXK/t0GpGNnPL5Xy//JCUP7anSZ0SdSbuW8Spxp+r7StU/XLwt9vqKf5rsY9CN8D8u4Mc8RZiSXceDuKyhQo72Eu8yYFswP9COQ4lgOJGcaCv5h9GwR+Iva+coQENBQyY2dItFpsBwSAPvGs2/4V82ztLMsmkTpoAzYupvE2AoddxArDjjTMeyKowMI6qtTyhaF9zTnJ7X7gs09lgTg7Hey5I1Q66QFfcwK"}function o(e,t,n){return Math.min(Math.max(e,t),n)}function d(e){var t;return(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0}function l(e,t){return e.reduce(function(e,n){var a=n[t];return e+("number"==typeof a?a:0)},0)}function s(e,t,n){t.loadDocument(n),t.renderAsync();var a=new e.Report.Export.StiHtmlExportSettings,r=new e.Report.Export.StiHtmlExportService,i=new e.System.IO.TextWriter,o=new e.Report.Export.StiHtmlTextWriter(i);r.exportTo(t,o,a);var d=document.createElement("iframe");d.name="frame1",d.style.position="absolute",d.style.top="-1000000px",document.body.appendChild(d);var l=d.contentDocument||d.contentWindow.document;return l.open(),l.write("</head><body>"),l.write(i.getStringBuilder().toString()),l.write("</body></html>"),l.close(),setTimeout(function(){window.frames.frame1.focus(),window.frames.frame1.print(),document.body.removeChild(d)},500),!1}function p(e){var t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return"".concat(e.getFullYear(),"-").concat(n,"-").concat(t)}function c(e){var t=e.replace(" PM","").replace(" AM","");return p(new Date(t))}n.d(t,"g",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"h",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return d}),n.d(t,"i",function(){return l}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return p}),n.d(t,"e",function(){return c})}}])}();