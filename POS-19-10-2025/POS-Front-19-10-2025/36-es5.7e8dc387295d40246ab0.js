!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{COue:function(n,i,r){"use strict";r.r(i),r.d(i,"OpenDayModule",function(){return A});var a=r("ofXK"),o=r("tyNb"),s=r("amrp"),l=r("L1NN"),d=r("eUyL"),c=r("b3ex"),u=r("PSD3"),p=r.n(u),m=r("fXoL"),f=r("NAVt"),h=r("TQQS"),y=r("R9YG"),g=r("sYmb"),v=r("ig09"),S=r("G1oB"),b=r("9Slh"),D=r("GJ+o"),C=["frmRef"],x=["Grid"];function w(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275element"](1,"input",13),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("checked",n.Closed)}}function T(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"button",15),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"]().CloseDay(e)}),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](4," \xa0 "),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](3,1,"Shared.CloseDay")," "))}function I(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"button",16),m["\u0275\u0275listener"]("click",function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275nextContext"]().$implicit;return m["\u0275\u0275nextContext"]().OpenDay(e)}),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](4," \xa0 "),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](3,1,"Shared.UnCloseDay")," "))}function j(e,t){if(1&e&&(m["\u0275\u0275template"](0,T,5,3,"div",14),m["\u0275\u0275template"](1,I,5,3,"div",14)),2&e){var n=t.$implicit;m["\u0275\u0275property"]("ngIf",!n.Closed),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.Closed)}}function O(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"button",17),m["\u0275\u0275listener"]("click",function(){var e=m["\u0275\u0275restoreView"](n).$implicit;return m["\u0275\u0275nextContext"]().ShowReport(e)}),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](3,1,"Shared.ShowReport")," "))}function E(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div"),m["\u0275\u0275elementStart"](1,"button",18),m["\u0275\u0275listener"]("click",function(){var e=m["\u0275\u0275restoreView"](n).$implicit;return m["\u0275\u0275nextContext"]().goToEndShift(e)}),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](4," \xa0 "),m["\u0275\u0275elementEnd"]()}2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](3,1,"Dashboard.Shift")," "))}var B,k,R,G=[{path:"",component:(B=function(){function n(t,i,r,a,o,s,l,d,c){e(this,n),this.opendayser=t,this.router=i,this.toastr=r,this.toastrMessage=a,this.languageSerService=o,this.translate=s,this.orderService=l,this.settingService=d,this.EndOfDayService=c,this.format={type:"date",format:"dd/MM/yyyy"},this.getAllUnClosedOrders=[],this.dayHaveOpenOrders=!1,this.initializeobjects()}var i,r,a;return i=n,(r=[{key:"ngOnInit",value:function(){this.GetData(),this.initializeGrid()}},{key:"initializeobjects",value:function(){var e=this;this.responseobj={},this.printDetailobj={},this.languageSerService.currentLang.subscribe(function(t){return e.language=t}),this.translate.use(this.language),this.settingService.GetSettings().subscribe(function(t){e.settings=t,e.printDetailobj.LanguageId=e.settings&&e.settings.SystemMainLanguage>0?e.settings.SystemMainLanguage:2})}},{key:"GetData",value:function(){var e=this;this.opendayser.getGrideList().subscribe(function(t){e.responseobj=t})}},{key:"initializeGrid",value:function(){this.pageSettings={pageSizes:!0,pageSize:10},this.filterOptions={type:"Menu"}}},{key:"ShowReport",value:function(e){this.router.navigateByUrl("/endofdayreport",e)}},{key:"CloseDay",value:function(e){var t=this;this.orderService.GetAllUnClosedOrders().subscribe(function(n){t.getAllUnClosedOrders=n,t.selectedDayDate=new Date(e.CreationTime).toLocaleDateString(),t.opendayDocumentID=e.DocumentId,t.unclosedOrder=t.getAllUnClosedOrders.find(function(e){if(e.OpenDayDocumentId==t.opendayDocumentID||t.selectedDayDate==new Date(e.CreationTime).toLocaleDateString())return e}),t.dayHaveOpenOrders=!!t.unclosedOrder,!0===t.dayHaveOpenOrders?t.toastr.error("You Should Close All Orders"):!1===t.dayHaveOpenOrders&&p.a.fire({title:t.translate.instant("Shared.Areyousure?"),text:t.translate.instant("Shared.CloseDay"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t.translate.instant("Shared.CloseDay"),cancelButtonText:t.translate.instant("Shared.Cancel")}).then(function(n){if(n.isConfirmed){var i=t.getCloseDayReportTranslationObj();e.LanguageOptions=i,t.opendayser.CloseDay(e).subscribe(function(n){1==n&&t.toastr.info("Edited successfully"),t.responseobj.OpenDayDocumentId=e.DocumentId,t.responseobj.FromDate=e.DayDate,t.responseobj.ToDate=e.DayDate,t.responseobj.FromTime=e.FromTime,t.responseobj.ToTime=e.ToTime,t.responseobj.DayName=e.DayName,t.swallPrintFinalReport()})}})})}},{key:"swallPrintFinalReport",value:function(){var e=this;p.a.fire({title:this.translate.instant("messages.printFinalReport"),icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate.instant("stock.Print"),cancelButtonText:this.translate.instant("Shared.Cancel")}).then(function(t){t.isConfirmed&&(e.responseobj.ImmediatePrint=!0,e.printFinalReport()),e.GetData()})}},{key:"printFinalReport",value:function(){var e=this;this.requestStarted=!0,this.EndOfDayService.prepareReportLables(this.printDetailobj,this.responseobj,this.myjson),this.EndOfDayService.PrintFirst(this.responseobj).subscribe(function(t){e.requestStarted=!1,e.responseobj.ImmediatePrint=!1})}},{key:"OpenDay",value:function(e){var t=this;p.a.fire({title:this.translate.instant("Shared.Areyousure?"),text:this.translate.instant("Shared.UnCloseDay"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate.instant("Shared.UnCloseDay")}).then(function(n){n.isConfirmed&&t.opendayser.OpenDay(e.DocumentId).subscribe(function(e){1==e&&t.toastr.info(t.toastrMessage.GlobalMessages(2)),t.GetData()})})}},{key:"goToEndShift",value:function(e){this.router.navigateByUrl("/endShift",e)}},{key:"getCloseDayReportTranslationObj",value:function(){var e,t="ar";return 1==this.printDetailobj.LanguageId&&(t="en",e=s.a),2==this.printDetailobj.LanguageId&&(t="ar",e=l.a),3==this.printDetailobj.LanguageId&&(t="en",e=d.a),4==this.printDetailobj.LanguageId&&(t="en",e=c.a),{CurrentUserLang:t,ReportsJson:e}}}])&&t(i.prototype,r),a&&t(i,a),n}(),B.\u0275fac=function(e){return new(e||B)(m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](h.g),m["\u0275\u0275directiveInject"](h.i),m["\u0275\u0275directiveInject"](h.d),m["\u0275\u0275directiveInject"](y.a),m["\u0275\u0275directiveInject"](g.e),m["\u0275\u0275directiveInject"](v.a),m["\u0275\u0275directiveInject"](S.i),m["\u0275\u0275directiveInject"](b.a))},B.\u0275cmp=m["\u0275\u0275defineComponent"]({type:B,selectors:[["app-open-day-list"]],viewQuery:function(e,t){var n;1&e&&(m["\u0275\u0275viewQuery"](C,5),m["\u0275\u0275viewQuery"](x,5)),2&e&&(m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.frmRef=n.first),m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.grid=n.first))},decls:29,vars:28,consts:[[1,"col-lg-12"],[1,"ms-card"],[1,"ms-card-body"],["id","Grid",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","allowGrouping"],["Grid",""],["field","SerialNumber","textAlign","center",3,"headerText"],["field","DayDate","type","date","textAlign","left",3,"headerText","format"],["field","DayName","textAlign","left",3,"headerText"],["field","FromTime","textAlign","left",3,"headerText"],["field","ToTime","textAlign","left",3,"headerText"],["field","Closed","editType","booleanedit","type","boolean",3,"headerText","allowFiltering","allowSorting"],["template",""],["class","d-flex"],["type","checkbox","disabled","","name","Closed","id","Closed",3,"checked"],[4,"ngIf"],["type","button",1,"btn","btn-success","btnEdit","m-0",3,"click"],["type","button",1,"btn","btn-danger","btnEdit","m-0",3,"click"],["type","button",1,"btn","btnEdit","btn-success","m-0",3,"click"],["type","button",1,"btn","btn-info","btnEdit","m-0",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275elementStart"](1,"div",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"ejs-grid",3,4),m["\u0275\u0275elementStart"](5,"e-columns"),m["\u0275\u0275element"](6,"e-column",5),m["\u0275\u0275pipe"](7,"translate"),m["\u0275\u0275element"](8,"e-column",6),m["\u0275\u0275pipe"](9,"translate"),m["\u0275\u0275element"](10,"e-column",7),m["\u0275\u0275pipe"](11,"translate"),m["\u0275\u0275element"](12,"e-column",8),m["\u0275\u0275pipe"](13,"translate"),m["\u0275\u0275element"](14,"e-column",9),m["\u0275\u0275pipe"](15,"translate"),m["\u0275\u0275elementStart"](16,"e-column",10),m["\u0275\u0275pipe"](17,"translate"),m["\u0275\u0275template"](18,w,2,1,"ng-template",null,11,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](20,"e-column"),m["\u0275\u0275template"](21,j,2,2,"ng-template",12,11,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"e-column"),m["\u0275\u0275template"](24,O,4,3,"ng-template",null,11,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"e-column"),m["\u0275\u0275template"](27,E,5,3,"ng-template",null,11,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("dataSource",t.responseobj.List)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowFiltering",!0)("filterSettings",t.filterOptions)("allowGrouping",!0),m["\u0275\u0275advance"](3),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](7,16,"Reports.SerialNumber")),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](9,18,"CashReceipt.Date")),m["\u0275\u0275property"]("format",t.format),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](11,20,"Shared.DayName")),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](13,22,"Shared.FromTime")),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](15,24,"Shared.ToTime")),m["\u0275\u0275advance"](2),m["\u0275\u0275propertyInterpolate"]("headerText",m["\u0275\u0275pipeBind1"](17,26,"Shared.Close")),m["\u0275\u0275property"]("allowFiltering",!1)("allowSorting",!1))},directives:[D.p,D.g,D.b,D.f,D.a,a.NgIf],pipes:[g.d],styles:[""]}),B)}],L=((k=function t(){e(this,t)}).\u0275fac=function(e){return new(e||k)},k.\u0275mod=m["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[o.f.forChild(G)],o.f]}),k),F=r("PCNd"),A=((R=function t(){e(this,t)}).\u0275fac=function(e){return new(e||R)},R.\u0275mod=m["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,L,F.a]]}),R)},Txa1:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var r=function t(){e(this,t)}},bJ22:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var r=function t(){e(this,t)}},cOv9:function(t,n,i){"use strict";i.d(n,"a",function(){return l});var r=i("ngTy"),a=i("bJ22"),o=i("mMi5"),s=i("Txa1"),l=function t(){e(this,t),this.IntegrationCustomerId=null,this.IntegrationCustomerDocumentId=null,this.FromTaxScreen=!1,this.ReservationInfo={},this.requestStarted=!1,this.paymentErrorFired=!1,this.VisaSameOrderPayTimeCount=0,this.orderTypeChangedAfterSave=!1,this.Customer=new o.a,this.Driver=new s.a,this.CustomerAddress=new a.a,this.OrderType=new r.a,this.OrderMasterTaxes=[],this.OrderDetails=[],this.ReturnOrders=[],this.OrderPayments=[],this.OrderInsurance={}}},mMi5:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var r=function t(){e(this,t)}},ngTy:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var r=function t(){e(this,t)}}}])}();