(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{COue:function(e,t,n){"use strict";n.r(t),n.d(t,"OpenDayModule",function(){return R});var i=n("ofXK"),r=n("tyNb"),a=n("amrp"),s=n("L1NN"),o=n("eUyL"),l=n("b3ex"),d=n("PSD3"),c=n.n(d),p=n("fXoL"),u=n("NAVt"),h=n("TQQS"),m=n("R9YG"),f=n("sYmb"),g=n("ig09"),y=n("G1oB"),S=n("9Slh"),b=n("GJ+o");const D=["frmRef"],C=["Grid"];function v(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275element"](1,"input",13),p["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("checked",e.Closed)}}function x(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"button",15),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"]().$implicit;return p["\u0275\u0275nextContext"]().CloseDay(t)}),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](4," \xa0 "),p["\u0275\u0275elementEnd"]()}2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](3,1,"Shared.CloseDay")," "))}function T(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"button",16),p["\u0275\u0275listener"]("click",function(){p["\u0275\u0275restoreView"](e);const t=p["\u0275\u0275nextContext"]().$implicit;return p["\u0275\u0275nextContext"]().OpenDay(t)}),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](4," \xa0 "),p["\u0275\u0275elementEnd"]()}2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](3,1,"Shared.UnCloseDay")," "))}function w(e,t){if(1&e&&(p["\u0275\u0275template"](0,x,5,3,"div",14),p["\u0275\u0275template"](1,T,5,3,"div",14)),2&e){const e=t.$implicit;p["\u0275\u0275property"]("ngIf",!e.Closed),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.Closed)}}function I(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"button",17),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"]().ShowReport(t)}),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](3,1,"Shared.ShowReport")," "))}function j(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"button",18),p["\u0275\u0275listener"]("click",function(){const t=p["\u0275\u0275restoreView"](e).$implicit;return p["\u0275\u0275nextContext"]().goToEndShift(t)}),p["\u0275\u0275text"](2),p["\u0275\u0275pipe"](3,"translate"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](4," \xa0 "),p["\u0275\u0275elementEnd"]()}2&e&&(p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",p["\u0275\u0275pipeBind1"](3,1,"Dashboard.Shift")," "))}const O=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,a,s,o,l){this.opendayser=e,this.router=t,this.toastr=n,this.toastrMessage=i,this.languageSerService=r,this.translate=a,this.orderService=s,this.settingService=o,this.EndOfDayService=l,this.format={type:"date",format:"dd/MM/yyyy"},this.getAllUnClosedOrders=[],this.dayHaveOpenOrders=!1,this.initializeobjects()}ngOnInit(){this.GetData(),this.initializeGrid()}initializeobjects(){this.responseobj={},this.printDetailobj={},this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language),this.settingService.GetSettings().subscribe(e=>{this.settings=e,this.printDetailobj.LanguageId=this.settings&&this.settings.SystemMainLanguage>0?this.settings.SystemMainLanguage:2})}GetData(){this.opendayser.getGrideList().subscribe(e=>{this.responseobj=e})}initializeGrid(){this.pageSettings={pageSizes:!0,pageSize:10},this.filterOptions={type:"Menu"}}ShowReport(e){this.router.navigateByUrl("/endofdayreport",e)}CloseDay(e){this.orderService.GetAllUnClosedOrders().subscribe(t=>{this.getAllUnClosedOrders=t,this.selectedDayDate=new Date(e.CreationTime).toLocaleDateString(),this.opendayDocumentID=e.DocumentId,this.unclosedOrder=this.getAllUnClosedOrders.find(e=>{if(e.OpenDayDocumentId==this.opendayDocumentID||this.selectedDayDate==new Date(e.CreationTime).toLocaleDateString())return e}),this.dayHaveOpenOrders=!!this.unclosedOrder,!0===this.dayHaveOpenOrders?this.toastr.error("You Should Close All Orders"):!1===this.dayHaveOpenOrders&&c.a.fire({title:this.translate.instant("Shared.Areyousure?"),text:this.translate.instant("Shared.CloseDay"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate.instant("Shared.CloseDay"),cancelButtonText:this.translate.instant("Shared.Cancel")}).then(t=>{if(t.isConfirmed){const t=this.getCloseDayReportTranslationObj();e.LanguageOptions=t,this.opendayser.CloseDay(e).subscribe(t=>{1==t&&this.toastr.info("Edited successfully"),this.responseobj.OpenDayDocumentId=e.DocumentId,this.responseobj.FromDate=e.DayDate,this.responseobj.ToDate=e.DayDate,this.responseobj.FromTime=e.FromTime,this.responseobj.ToTime=e.ToTime,this.responseobj.DayName=e.DayName,this.swallPrintFinalReport()})}})})}swallPrintFinalReport(){c.a.fire({title:this.translate.instant("messages.printFinalReport"),icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate.instant("stock.Print"),cancelButtonText:this.translate.instant("Shared.Cancel")}).then(e=>{e.isConfirmed&&(this.responseobj.ImmediatePrint=!0,this.printFinalReport()),this.GetData()})}printFinalReport(){this.requestStarted=!0,this.EndOfDayService.prepareReportLables(this.printDetailobj,this.responseobj,this.myjson),this.EndOfDayService.PrintFirst(this.responseobj).subscribe(e=>{this.requestStarted=!1,this.responseobj.ImmediatePrint=!1})}OpenDay(e){c.a.fire({title:this.translate.instant("Shared.Areyousure?"),text:this.translate.instant("Shared.UnCloseDay"),icon:"error",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate.instant("Shared.UnCloseDay")}).then(t=>{t.isConfirmed&&this.opendayser.OpenDay(e.DocumentId).subscribe(e=>{1==e&&this.toastr.info(this.toastrMessage.GlobalMessages(2)),this.GetData()})})}goToEndShift(e){this.router.navigateByUrl("/endShift",e)}getCloseDayReportTranslationObj(){let e,t="ar";return 1==this.printDetailobj.LanguageId&&(t="en",e=a.a),2==this.printDetailobj.LanguageId&&(t="ar",e=s.a),3==this.printDetailobj.LanguageId&&(t="en",e=o.a),4==this.printDetailobj.LanguageId&&(t="en",e=l.a),{CurrentUserLang:t,ReportsJson:e}}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](u.a),p["\u0275\u0275directiveInject"](h.g),p["\u0275\u0275directiveInject"](h.i),p["\u0275\u0275directiveInject"](h.d),p["\u0275\u0275directiveInject"](m.a),p["\u0275\u0275directiveInject"](f.e),p["\u0275\u0275directiveInject"](g.a),p["\u0275\u0275directiveInject"](y.i),p["\u0275\u0275directiveInject"](S.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["app-open-day-list"]],viewQuery:function(e,t){if(1&e&&(p["\u0275\u0275viewQuery"](D,5),p["\u0275\u0275viewQuery"](C,5)),2&e){let e;p["\u0275\u0275queryRefresh"](e=p["\u0275\u0275loadQuery"]())&&(t.frmRef=e.first),p["\u0275\u0275queryRefresh"](e=p["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},decls:29,vars:28,consts:[[1,"col-lg-12"],[1,"ms-card"],[1,"ms-card-body"],["id","Grid",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","allowGrouping"],["Grid",""],["field","SerialNumber","textAlign","center",3,"headerText"],["field","DayDate","type","date","textAlign","left",3,"headerText","format"],["field","DayName","textAlign","left",3,"headerText"],["field","FromTime","textAlign","left",3,"headerText"],["field","ToTime","textAlign","left",3,"headerText"],["field","Closed","editType","booleanedit","type","boolean",3,"headerText","allowFiltering","allowSorting"],["template",""],["class","d-flex"],["type","checkbox","disabled","","name","Closed","id","Closed",3,"checked"],[4,"ngIf"],["type","button",1,"btn","btn-success","btnEdit","m-0",3,"click"],["type","button",1,"btn","btn-danger","btnEdit","m-0",3,"click"],["type","button",1,"btn","btnEdit","btn-success","m-0",3,"click"],["type","button",1,"btn","btn-info","btnEdit","m-0",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"div",2),p["\u0275\u0275elementStart"](3,"ejs-grid",3,4),p["\u0275\u0275elementStart"](5,"e-columns"),p["\u0275\u0275element"](6,"e-column",5),p["\u0275\u0275pipe"](7,"translate"),p["\u0275\u0275element"](8,"e-column",6),p["\u0275\u0275pipe"](9,"translate"),p["\u0275\u0275element"](10,"e-column",7),p["\u0275\u0275pipe"](11,"translate"),p["\u0275\u0275element"](12,"e-column",8),p["\u0275\u0275pipe"](13,"translate"),p["\u0275\u0275element"](14,"e-column",9),p["\u0275\u0275pipe"](15,"translate"),p["\u0275\u0275elementStart"](16,"e-column",10),p["\u0275\u0275pipe"](17,"translate"),p["\u0275\u0275template"](18,v,2,1,"ng-template",null,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](20,"e-column"),p["\u0275\u0275template"](21,w,2,2,"ng-template",12,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](23,"e-column"),p["\u0275\u0275template"](24,I,4,3,"ng-template",null,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](26,"e-column"),p["\u0275\u0275template"](27,j,5,3,"ng-template",null,11,p["\u0275\u0275templateRefExtractor"]),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("dataSource",t.responseobj.List)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowFiltering",!0)("filterSettings",t.filterOptions)("allowGrouping",!0),p["\u0275\u0275advance"](3),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](7,16,"Reports.SerialNumber")),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](9,18,"CashReceipt.Date")),p["\u0275\u0275property"]("format",t.format),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](11,20,"Shared.DayName")),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](13,22,"Shared.FromTime")),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](15,24,"Shared.ToTime")),p["\u0275\u0275advance"](2),p["\u0275\u0275propertyInterpolate"]("headerText",p["\u0275\u0275pipeBind1"](17,26,"Shared.Close")),p["\u0275\u0275property"]("allowFiltering",!1)("allowSorting",!1))},directives:[b.p,b.g,b.b,b.f,b.a,i.NgIf],pipes:[f.d],styles:[""]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[r.f.forChild(O)],r.f]}),e})();var B=n("PCNd");let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({imports:[[i.CommonModule,E,B.a]]}),e})()},Txa1:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{}},bJ22:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{}},cOv9:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("ngTy"),r=n("bJ22"),a=n("mMi5"),s=n("Txa1");class o{constructor(){this.IntegrationCustomerId=null,this.IntegrationCustomerDocumentId=null,this.FromTaxScreen=!1,this.ReservationInfo={},this.requestStarted=!1,this.paymentErrorFired=!1,this.VisaSameOrderPayTimeCount=0,this.orderTypeChangedAfterSave=!1,this.Customer=new a.a,this.Driver=new s.a,this.CustomerAddress=new r.a,this.OrderType=new i.a,this.OrderMasterTaxes=[],this.OrderDetails=[],this.ReturnOrders=[],this.OrderPayments=[],this.OrderInsurance={}}}},mMi5:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{}},ngTy:function(e,t,n){"use strict";n.d(t,"a",function(){return i});class i{}}}]);