(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{tNlC:function(e,t,n){"use strict";n.r(t),n.d(t,"NewDashboardModule",function(){return M});var a=n("ofXK"),r=n("3Pt+"),d=n("PCNd"),s=n("tyNb"),i=n("mrSG");class o{constructor(){this.Kpis=[],this.OrdersCompare=[],this.OrderTypesCompare=[],this.Hours=[],this.SmartInsights=[],this.TopProducts={},this.TopBranches={},this.UserSales={}}}var l=function(e){return e[e.Cash=10]="Cash",e[e.Credit=20]="Credit",e[e.Visa=30]="Visa",e[e.Free=50]="Free",e[e.CashBack=70]="CashBack",e}({}),p=function(e){return e[e.Orders=1]="Orders",e[e.ReturnOrders=2]="ReturnOrders",e[e.NetSales=3]="NetSales",e[e.CashReceipt=4]="CashReceipt",e[e.ExtraExpenses=5]="ExtraExpenses",e}({}),c=n("un1/"),m=n("fXoL"),h=n("xPZZ"),u=n("uU2i"),g=n("sYmb");function b(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",37),m["\u0275\u0275elementStart"](1,"div",38),m["\u0275\u0275elementStart"](2,"div",39),m["\u0275\u0275element"](3,"div"),m["\u0275\u0275element"](4,"div"),m["\u0275\u0275element"](5,"div"),m["\u0275\u0275element"](6,"div"),m["\u0275\u0275element"](7,"div"),m["\u0275\u0275element"](8,"div"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}function f(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",40),m["\u0275\u0275elementStart"](1,"label",41),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"input",42),m["\u0275\u0275listener"]("ngModelChange",function(t){return m["\u0275\u0275restoreView"](e),m["\u0275\u0275nextContext"]().filters.Date=t}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind1"](3,2,"Reports.Date"),":"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",e.filters.Date)}}function y(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",43),m["\u0275\u0275elementStart"](1,"label",44),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"input",45),m["\u0275\u0275listener"]("ngModelChange",function(t){return m["\u0275\u0275restoreView"](e),m["\u0275\u0275nextContext"]().filters.Week=t}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind1"](3,2,"Dashboard.Week"),":"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",e.filters.Week)}}function v(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",46),m["\u0275\u0275elementStart"](1,"label",47),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"input",48),m["\u0275\u0275listener"]("ngModelChange",function(t){return m["\u0275\u0275restoreView"](e),m["\u0275\u0275nextContext"]().filters.Month=t}),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind1"](3,2,"Dashboard.Month"),":"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",e.filters.Month)}}function x(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"span"),m["\u0275\u0275text"](1,"|"),m["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"span"),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](4,x,2,0,"span",54),m["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=m["\u0275\u0275nextContext"]().$implicit,a=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate3"](" ",e.Icon," ",e.PayName,": ",m["\u0275\u0275pipeBind2"](3,4,e.Amount,a.fraction)," "),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",!a.isLastPayment(n.Payments,e))}}function C(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",52),m["\u0275\u0275text"](1),m["\u0275\u0275pipe"](2,"translate"),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]().$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate2"]("\ud83d\udce6 ",m["\u0275\u0275pipeBind1"](2,2,"Shared.count")," : ",e.Count,"")}}const E=function(){return[]};function D(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"div",49),m["\u0275\u0275elementStart"](2,"div",50),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div",51),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",52),m["\u0275\u0275template"](8,S,5,7,"ng-container",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](9,C,3,4,"div",53),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275classMap"](e.BorderClass),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.Name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](6,6,e.TotalAmount,n.fraction)),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",e.Payments||m["\u0275\u0275pureFunction0"](9,E)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",3!=e.Type)}}function I(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr",55),m["\u0275\u0275elementStart"](1,"td",17),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td",17),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"td",17),m["\u0275\u0275text"](7),m["\u0275\u0275pipe"](8,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",56),m["\u0275\u0275text"](10),m["\u0275\u0275pipe"](11,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"td",56),m["\u0275\u0275text"](13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.Name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](5,7,e.OrdersForPerid,n.fraction)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](8,10,e.OrdersLastPerid,n.fraction)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",e.Color),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind2"](11,13,e.Percentage,"1.0"),"%"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",e.Color),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e.Icon)}}const T=function(e){return{"text-end text-success":e}};function w(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr",55),m["\u0275\u0275elementStart"](1,"td",17),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td",17),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"td",17),m["\u0275\u0275text"](7),m["\u0275\u0275pipe"](8,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",56),m["\u0275\u0275text"](10),m["\u0275\u0275pipe"](11,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.BranchName),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](5,5,e.TargetAmount,n.fraction)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](8,8,e.TargetActualAmount,n.fraction)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](14,T,e.Percentage>=100)),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind2"](11,11,e.Percentage,"1.0"),"%")}}function O(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",13),m["\u0275\u0275elementStart"](1,"h2",14),m["\u0275\u0275text"](2),m["\u0275\u0275pipe"](3,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"table",15),m["\u0275\u0275elementStart"](5,"thead",16),m["\u0275\u0275elementStart"](6,"tr"),m["\u0275\u0275elementStart"](7,"th",17),m["\u0275\u0275text"](8),m["\u0275\u0275pipe"](9,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"th",17),m["\u0275\u0275text"](11),m["\u0275\u0275pipe"](12,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"th",17),m["\u0275\u0275text"](14),m["\u0275\u0275pipe"](15,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"th",17),m["\u0275\u0275text"](17),m["\u0275\u0275pipe"](18,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"tbody"),m["\u0275\u0275template"](20,w,12,16,"tr",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate2"]("\ud83d\ude80 ",m["\u0275\u0275pipeBind1"](3,7,"Dashboard.TargetForMonth")," ' ",e.dashboardData.SalesTarget.PeriodName," '"),m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](9,9,"Layout.Branch")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](12,11,"Shared.SalesTarget")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](15,13,"Reports.ActualAmount")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](18,15,"Shared.Percentage")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",(null==e.dashboardData.SalesTarget?null:e.dashboardData.SalesTarget.TargetBranches)||m["\u0275\u0275pureFunction0"](17,E))}}function P(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"tr",55),m["\u0275\u0275elementStart"](1,"td",17),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"td",17),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"td",17),m["\u0275\u0275text"](7),m["\u0275\u0275pipe"](8,"number"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"td",56),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"td",56),m["\u0275\u0275text"](12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.Name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](5,7,e.OrdersForPerid,n.fraction)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind2"](8,10,e.OrdersLastPerid,n.fraction)),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",e.Color),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"]("",e.Percentage,"%"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",e.Color),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e.Icon)}}function B(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"li"),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](e)}}const F=[{path:"",component:(()=>{class e{constructor(e,t,n,a){this.renderer=e,this.dashboardService=t,this.languageSerService=n,this.translate=a,this.fraction="1.2-2",this.filters={FilterType:"daily",Date:Object(c.f)(new Date)},this.language="en",this.requestStarted=!1,this.loadedScriptElement=[],this.dashboardData=new o,this.loadData(),this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language),this.applyFilters()}getPaymentIcon(e){switch(e){case l.Credit:return"\ud83e\uddfe";case l.Cash:return"\ud83d\udcb3";case l.Visa:return"\ud83d\udcb5";default:return"\ud83d\udcb0"}}getKpiBorderClass(e){switch(e){case p.Orders:return"border-blue-700";case p.ReturnOrders:return"border-red-600";case p.NetSales:return"border-green-600";case p.CashReceipt:return"border-yellow-600";case p.ExtraExpenses:return"border-purple-600";default:return"border-gray-600"}}loadData(){return Object(i.a)(this,void 0,void 0,function*(){yield this.loadAssets(),this.handleData()})}ngOnDestroy(){var e;try{(null===(e=this.loadedScriptElement)||void 0===e?void 0:e.length)&&this.loadedScriptElement.forEach(e=>this.renderer.removeChild(document.body,e));const t=window.Chart||Chart;this.distroyOldCanvases(["ordersHourChart","hourlySalesChart","paymentChart","discountChart","invoiceTypeChart","topProductsChart","topPaymentsChart","topBranchesChart","topUsersChart"],t)}catch(t){}}ngAfterViewInit(){return Object(i.a)(this,void 0,void 0,function*(){})}loadScript(e){return new Promise((t,n)=>{const a=this.renderer.createElement("script");a.src=e,a.async=!0,a.onload=()=>t(),a.onerror=()=>n(),this.renderer.appendChild(document.body,a),this.loadedScriptElement.push(a)})}loadAssets(){return Object(i.a)(this,void 0,void 0,function*(){this.loadCss("assets/sass/tailwind/tailwind.css"),yield Promise.all([this.loadScript("assets/js/jsdelivr.js")]),console.log("\u2705 All scripts loaded")})}loadCss(e){const t=this.renderer.createElement("link");t.rel="stylesheet",t.href=e,this.renderer.appendChild(document.head,t)}initDashboard(){var e;const t=this.dashboardData.OrdersCompare.reduce((e,t)=>(e[t.Name]=t.OrdersForPerid||0,e),{}),n=this.dashboardData.Hours.map(e=>e.Hour||""),a=this.dashboardData.Hours.map(e=>e.Count||0),r=this.dashboardData.Hours.map(e=>e.Amount||0),d=this.dashboardData.Hours.map(e=>e.Discount||0),s=(null===(e=this.dashboardData.Kpis.find(e=>e.Type===p.Orders))||void 0===e?void 0:e.Payments.reduce((e,t)=>(e[t.PayName]=t.Amount,e),{}))||{},i=this.dashboardData.TopProducts||{},o=this.dashboardData.TopBranches||{},l=this.dashboardData.UserSales||{};(()=>{const e=window.Chart||Chart;this.distroyOldCanvases(["ordersHourChart","hourlySalesChart","paymentChart","discountChart","invoiceTypeChart","topProductsChart","topPaymentsChart","topBranchesChart","topUsersChart"],e),new e(document.getElementById("ordersHourChart"),{type:"bar",data:{labels:n,datasets:[{label:this.translate.instant("Dashboard.OrdersCount"),data:a,backgroundColor:"#2563eb"}]}}),new e(document.getElementById("hourlySalesChart"),{type:"bar",data:{labels:n,datasets:[{label:this.translate.instant("Dashboard.OrdersAmount"),data:r,backgroundColor:"#1e40af"}]}}),new e(document.getElementById("paymentChart"),{type:"doughnut",data:{labels:Object.keys(s),datasets:[{data:Object.values(s),backgroundColor:["#3b82f6","#8b5cf6","#f59e0b","#10b981"]}]}}),new e(document.getElementById("discountChart"),{type:"bar",data:{labels:n,datasets:[{label:this.translate.instant("Dashboard.Discounts"),data:d,backgroundColor:"#f97316"}]}}),new e(document.getElementById("invoiceTypeChart"),{type:"pie",data:{labels:Object.keys(t),datasets:[{data:Object.values(t),backgroundColor:["#2563eb","#ef4444","#f59e0b"]}]}}),new e(document.getElementById("topProductsChart"),{type:"bar",data:{labels:Object.keys(i),datasets:[{label:this.translate.instant("Dashboard.BestPerformanceProducts"),data:Object.values(i),backgroundColor:"#2563eb"}]},options:{indexAxis:"y"}}),new e(document.getElementById("topPaymentsChart"),{type:"bar",data:{labels:Object.keys(s),datasets:[{label:this.translate.instant("Dashboard.TopPaymentMethods"),data:Object.values(s),backgroundColor:"#f59e0b"}]},options:{indexAxis:"y"}}),new e(document.getElementById("topBranchesChart"),{type:"bar",data:{labels:Object.keys(o),datasets:[{label:this.translate.instant("Dashboard.TopBranches"),data:Object.values(o),backgroundColor:"#10b981"}]},options:{indexAxis:"y"}}),new e(document.getElementById("topUsersChart"),{type:"bar",data:{labels:Object.keys(l),datasets:[{label:this.translate.instant("Dashboard.TopSellingUsers"),data:Object.values(l),backgroundColor:"#0ea5e9"}]},options:{indexAxis:"y"}})})(),(()=>{const e=document.getElementById("userPercentages");if(!e)return;const t=Object.values(l).reduce((e,t)=>e+t,0);let n="";Object.entries(l).forEach(([e,a])=>{const r=a/t*100,d=this.translate.instant("Dashboard.UserSellPerc").replace("{0}",e).replace("{1}",r.toFixed(1));n+=`<div>${d}</div>`}),e.innerHTML=n})()}distroyOldCanvases(e,t){e.forEach(e=>{const n=document.getElementById(e);if(n)try{if(t&&"function"==typeof t.getChart){const e=t.getChart(n);e&&e.destroy()}else t.instances&&(Array.isArray(t.instances)?t.instances:t.instances.values?Array.from(t.instances.values()):[]).forEach(t=>{try{t&&t.canvas&&t.canvas.id===e&&t.destroy()}catch(n){}})}catch(a){}})}isLastPayment(e,t){return e.indexOf(t)===e.length-1}getOrdersComparisonIcon(e){return e.Icon=e.OrdersForPerid>e.OrdersLastPerid?"\ud83d\udd3c":e.OrdersForPerid<e.OrdersLastPerid?"\ud83d\udd3b":"\u2796",e.Percentage=e.OrdersLastPerid&&0!==e.OrdersLastPerid?(e.OrdersForPerid-e.OrdersLastPerid)/e.OrdersLastPerid*100:0,e.Percentage=Math.round(10*e.Percentage)/10,e.Color=e.Percentage>0?"text-green-600":e.Percentage<0?"text-red-600":"text-gray-600",e.Icon}handleData(e=0){var t,n;this.dashboardData.Kpis.forEach(e=>{e.Name=this.translate.instant(`Screens.${p[e.Type]}`),e.TotalAmount=e.Payments.reduce((e,t)=>e+t.Amount,0),e.BorderClass=this.getKpiBorderClass(e.Type),e.Payments.forEach(e=>{e.Icon=this.getPaymentIcon(e.PayType)})});const a=(null===(t=this.dashboardData.Kpis.find(e=>e.Type===p.Orders))||void 0===t?void 0:t.TotalAmount)||0,r=(null===(n=this.dashboardData.Kpis.find(e=>e.Type===p.ReturnOrders))||void 0===n?void 0:n.TotalAmount)||0;let d=this.dashboardData.Kpis.find(e=>e.Type===p.NetSales);d&&(d.TotalAmount=a-r),this.dashboardData.OrdersCompare.forEach(e=>{this.getOrdersComparisonIcon(e)}),this.dashboardData.OrderTypesCompare.forEach(e=>{this.getOrdersComparisonIcon(e)}),this.buildInsights(),setTimeout(()=>this.initDashboard(),e)}buildInsights(){var e,t,n;if(0===this.dashboardData.Hours.length)return;const a=Math.max(...this.dashboardData.Hours.map(e=>e.Amount||0)),r=(null===(e=this.dashboardData.Hours.find(e=>e.Amount===a))||void 0===e?void 0:e.Hour)||"";this.dashboardData.SmartInsights=[];const d=this.translate.instant("Dashboard.GreatestHour").replace("{0}",r).replace("{1}",a.toFixed(0));this.dashboardData.SmartInsights.push(d);const s=(this.dashboardData.Hours.reduce((e,t)=>e+(t.Amount||0),0)/this.dashboardData.Hours.length).toFixed(0),i=this.translate.instant("Dashboard.AvgSalesPerHour").replace("{0}",s);this.dashboardData.SmartInsights.push(i);const o=((null===(t=this.dashboardData.Kpis.find(e=>e.Type===p.ReturnOrders))||void 0===t?void 0:t.TotalAmount)||0)/((null===(n=this.dashboardData.Kpis.find(e=>e.Type===p.Orders))||void 0===n?void 0:n.TotalAmount)||1)*100;if(o>10){const e=this.translate.instant("Dashboard.ReturnRate").replace("{0}",o.toFixed(1));this.dashboardData.SmartInsights.push(e)}else{const e=this.translate.instant("Dashboard.GeneralPerformance");this.dashboardData.SmartInsights.push(e)}}applyFilters(){try{this.requestStarted=!0,this.filters.Lang=this.language,this.dashboardService.getNewDashboard(this.filters).subscribe({next:e=>{this.requestStarted=!1,e&&(this.dashboardData=e,this.handleData())},error:e=>{this.requestStarted=!1,console.error("Failed to load dashboard with filters",e)}})}catch(e){this.requestStarted=!1,console.error(e)}}get periodToLastPeriodTitle(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.ThisWeekVsLastWeek");case"monthly":return this.translate.instant("Dashboard.ThisMonthVsLastMonth");default:return this.translate.instant("Dashboard.TodayVsYesterday")}}get comparisonPaymentTitle(){return this.translate.instant("Dashboard.ComparingSalesByType").replace("{0}",this.periodToLastPeriodTitle)}get comparisonOrderTypeTitle(){return this.translate.instant("Dashboard.ComparingInvoiceTypes").replace("{0}",this.periodToLastPeriodTitle)}get periodTitle(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.Week");case"monthly":return this.translate.instant("Dashboard.Month");default:return this.translate.instant("Dashboard.Day")}}get lastPeriodTitle(){switch(this.filters.FilterType){case"weekly":return this.translate.instant("Dashboard.LastWeek");case"monthly":return this.translate.instant("Dashboard.LastMonth");default:return this.translate.instant("Dashboard.Yesterday")}}get useSalesTarget(){var e,t;return(null===(t=null===(e=this.dashboardData.SalesTarget)||void 0===e?void 0:e.TargetBranches)||void 0===t?void 0:t.length)>0}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](m.Renderer2),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](u.d),m["\u0275\u0275directiveInject"](g.e))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-dashboard"]],decls:131,vars:93,consts:[["id","preloader-wrap",4,"ngIf"],[1,"flex","flex-wrap","items-center","gap-3","p-4","bg-gray-200"],[1,"flex","items-center","gap-2"],["for","filterType",1,"font-semibold"],["id","filterType","name","filterType",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],[3,"ngValue"],["id","dateFilter","class","flex items-center gap-2",4,"ngIf"],["id","weekFilter","class","flex items-center gap-2",4,"ngIf"],["id","monthFilter","class","flex items-center gap-2",4,"ngIf"],["id","applyFilter",1,"bg-blue-900","text-white","px-4","py-2","rounded","hover:bg-blue-800",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-5","gap-4","p-4"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","gap-4","p-4",3,"ngClass"],[1,"card"],[1,"font-bold","mb-2"],[1,"w-full","text-sm","text-right","border"],[1,"bg-blue-100"],[1,"p-2"],["class","border-b",4,"ngFor","ngForOf"],["class","card",4,"ngIf"],[1,"bg-green-100"],[1,"p-4"],[1,"section-title","text-lg","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["id","ordersHourChart"],["id","hourlySalesChart"],["id","paymentChart"],["id","discountChart"],["id","invoiceTypeChart"],[1,"card","lg:col-span-3","bg-gray-50","pl-4"],["id","insightsList",1,"list-disc","pr-6","text-sm","leading-7"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],["id","topProductsChart"],["id","topPaymentsChart"],["id","topBranchesChart"],["id","topUsersChart"],["id","userPercentages",1,"mt-3","text-sm","text-gray-700","leading-6"],["id","preloader-wrap"],[1,"col-md-9","d-flex","justify-content-center","align-items-center"],[1,"new-spinner"],["id","dateFilter",1,"flex","items-center","gap-2"],["for","dateInput",1,"font-semibold"],["type","date","id","dateInput","name","dateInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],["id","weekFilter",1,"flex","items-center","gap-2"],["for","weekInput",1,"font-semibold"],["type","week","id","weekInput","name","weekInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],["id","monthFilter",1,"flex","items-center","gap-2"],["for","monthInput",1,"font-semibold"],["type","month","id","monthInput","name","monthInput",1,"p-2","rounded","border","border-gray-300",3,"ngModel","ngModelChange"],[1,"card2","border-t-4"],[1,"kpi-title"],[1,"kpi-value","text-blue-800"],[1,"mini-line"],["class","mini-line",4,"ngIf"],[4,"ngIf"],[1,"border-b"],[1,"p-2",3,"ngClass"]],template:function(e,t){1&e&&(m["\u0275\u0275template"](0,b,9,0,"div",0),m["\u0275\u0275elementStart"](1,"section",1),m["\u0275\u0275elementStart"](2,"div",2),m["\u0275\u0275elementStart"](3,"label",3),m["\u0275\u0275text"](4),m["\u0275\u0275pipe"](5,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"select",4),m["\u0275\u0275listener"]("ngModelChange",function(e){return t.filters.FilterType=e}),m["\u0275\u0275elementStart"](7,"option",5),m["\u0275\u0275text"](8),m["\u0275\u0275pipe"](9,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](10,"option",5),m["\u0275\u0275text"](11),m["\u0275\u0275pipe"](12,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"option",5),m["\u0275\u0275text"](14),m["\u0275\u0275pipe"](15,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](16,f,5,4,"div",6),m["\u0275\u0275template"](17,y,5,4,"div",7),m["\u0275\u0275template"](18,v,5,4,"div",8),m["\u0275\u0275elementStart"](19,"button",9),m["\u0275\u0275listener"]("click",function(){return t.applyFilters()}),m["\u0275\u0275text"](20),m["\u0275\u0275pipe"](21,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerStart"](22),m["\u0275\u0275elementStart"](23,"section",10),m["\u0275\u0275template"](24,D,10,10,"ng-container",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"section",12),m["\u0275\u0275elementStart"](26,"div",13),m["\u0275\u0275elementStart"](27,"h2",14),m["\u0275\u0275text"](28),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"table",15),m["\u0275\u0275elementStart"](30,"thead",16),m["\u0275\u0275elementStart"](31,"tr"),m["\u0275\u0275elementStart"](32,"th",17),m["\u0275\u0275text"](33),m["\u0275\u0275pipe"](34,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](35,"th",17),m["\u0275\u0275text"](36),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](37,"th",17),m["\u0275\u0275text"](38),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](39,"th",17),m["\u0275\u0275text"](40),m["\u0275\u0275pipe"](41,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"th",17),m["\u0275\u0275text"](43),m["\u0275\u0275pipe"](44,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](45,"tbody"),m["\u0275\u0275template"](46,I,14,16,"tr",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](47,O,21,18,"div",19),m["\u0275\u0275elementStart"](48,"div",13),m["\u0275\u0275elementStart"](49,"h2",14),m["\u0275\u0275text"](50),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](51,"table",15),m["\u0275\u0275elementStart"](52,"thead",20),m["\u0275\u0275elementStart"](53,"tr"),m["\u0275\u0275elementStart"](54,"th",17),m["\u0275\u0275text"](55),m["\u0275\u0275pipe"](56,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](57,"th",17),m["\u0275\u0275text"](58),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](59,"th",17),m["\u0275\u0275text"](60),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](61,"th",17),m["\u0275\u0275text"](62),m["\u0275\u0275pipe"](63,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](64,"th",17),m["\u0275\u0275text"](65),m["\u0275\u0275pipe"](66,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](67,"tbody"),m["\u0275\u0275template"](68,P,13,13,"tr",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](69,"section",21),m["\u0275\u0275elementStart"](70,"h2",22),m["\u0275\u0275text"](71),m["\u0275\u0275pipe"](72,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](73,"div",23),m["\u0275\u0275elementStart"](74,"div",13),m["\u0275\u0275elementStart"](75,"h3",14),m["\u0275\u0275text"](76),m["\u0275\u0275pipe"](77,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](78,"canvas",24),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](79,"div",13),m["\u0275\u0275elementStart"](80,"h3",14),m["\u0275\u0275text"](81),m["\u0275\u0275pipe"](82,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](83,"canvas",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](84,"div",13),m["\u0275\u0275elementStart"](85,"h3",14),m["\u0275\u0275text"](86),m["\u0275\u0275pipe"](87,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](88,"canvas",26),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](89,"div",13),m["\u0275\u0275elementStart"](90,"h3",14),m["\u0275\u0275text"](91),m["\u0275\u0275pipe"](92,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](93,"canvas",27),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](94,"div",13),m["\u0275\u0275elementStart"](95,"h3",14),m["\u0275\u0275text"](96),m["\u0275\u0275pipe"](97,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](98,"canvas",28),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](99,"div",29),m["\u0275\u0275elementStart"](100,"h3",14),m["\u0275\u0275text"](101),m["\u0275\u0275pipe"](102,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](103,"ul",30),m["\u0275\u0275template"](104,B,2,1,"li",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](105,"section",21),m["\u0275\u0275elementStart"](106,"h2",22),m["\u0275\u0275text"](107),m["\u0275\u0275pipe"](108,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](109,"div",31),m["\u0275\u0275elementStart"](110,"div",13),m["\u0275\u0275elementStart"](111,"h3",14),m["\u0275\u0275text"](112),m["\u0275\u0275pipe"](113,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](114,"canvas",32),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](115,"div",13),m["\u0275\u0275elementStart"](116,"h3",14),m["\u0275\u0275text"](117),m["\u0275\u0275pipe"](118,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](119,"canvas",33),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](120,"div",13),m["\u0275\u0275elementStart"](121,"h3",14),m["\u0275\u0275text"](122),m["\u0275\u0275pipe"](123,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](124,"canvas",34),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](125,"div",13),m["\u0275\u0275elementStart"](126,"h3",14),m["\u0275\u0275text"](127),m["\u0275\u0275pipe"](128,"translate"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](129,"canvas",35),m["\u0275\u0275element"](130,"div",36),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()),2&e&&(m["\u0275\u0275property"]("ngIf",t.requestStarted),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](5,43,"Dashboard.FilterType"),":"),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngModel",t.filters.FilterType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngValue","daily"),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](9,45,"Dashboard.Daily")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngValue","weekly"),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](12,47,"Dashboard.Weekly")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngValue","monthly"),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](15,49,"Dashboard.Monthly")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","daily"===t.filters.FilterType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","weekly"===t.filters.FilterType),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","monthly"===t.filters.FilterType),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"](" ",m["\u0275\u0275pipeBind1"](21,51,"Dashboard.ApplyFilter")," "),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngForOf",(null==t.dashboardData?null:t.dashboardData.Kpis)||m["\u0275\u0275pureFunction0"](89,E)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngClass",t.useSalesTarget?"md:grid-cols-3":"md:grid-cols-2"),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("\ud83d\udcc8 ",t.comparisonPaymentTitle,""),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](34,53,"Shared.type")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](t.periodTitle),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](t.lastPeriodTitle),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind1"](41,55,"Dashboard.Differance"),"%"),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](44,57,"Shared.status")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",t.dashboardData.OrdersCompare||m["\u0275\u0275pureFunction0"](90,E)),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.useSalesTarget),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("\ud83e\uddfe ",t.comparisonOrderTypeTitle,""),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](56,59,"Shared.type")),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](t.periodTitle),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](t.lastPeriodTitle),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("",m["\u0275\u0275pipeBind1"](63,61,"Dashboard.Differance"),"%"),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](66,63,"Shared.status")),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",t.dashboardData.OrderTypesCompare||m["\u0275\u0275pureFunction0"](91,E)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("\ud83d\udcca ",m["\u0275\u0275pipeBind1"](72,65,"Dashboard.AnalyticalCharts"),""),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](77,67,"Dashboard.OrdersPerHour")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](82,69,"Dashboard.OrdersAmountPerHour")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](87,71,"manageorder.Order Pay Types")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](92,73,"Dashboard.Discounts")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](97,75,"Dashboard.OrderTypesPercentages")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate1"]("\ud83d\udd14 ",m["\u0275\u0275pipeBind1"](102,77,"Dashboard.SmartInsights"),""),m["\u0275\u0275advance"](3),m["\u0275\u0275property"]("ngForOf",(null==t.dashboardData?null:t.dashboardData.SmartInsights)||m["\u0275\u0275pureFunction0"](92,E)),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"]("\ud83c\udfc6 ",m["\u0275\u0275pipeBind1"](108,79,"Dashboard.BestPerformance"),""),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](113,81,"Dashboard.BestPerformanceProducts")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](118,83,"Dashboard.TopPaymentMethods")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](123,85,"Dashboard.TopBranches")),m["\u0275\u0275advance"](5),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](128,87,"Dashboard.TopSellingUsers")))},directives:[a.NgIf,r.A,r.r,r.u,r.v,r.D,a.NgForOf,a.NgClass,r.c],pipes:[g.d,a.DecimalPipe],styles:["[_nghost-%COMP%]{font-family:Tajawal,sans-serif;display:block;background:#f3f4f6}.dashboard-root[_ngcontent-%COMP%]{direction:rtl}.card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 6px 18px -8px rgba(0,0,0,.2);padding:16px;background:#fff}.kpi-title[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem}.kpi-value[_ngcontent-%COMP%]{font-weight:800;font-size:1.6rem}.mini-line[_ngcontent-%COMP%]{font-size:.85rem;color:#4b5563}.section-title[_ngcontent-%COMP%]{font-weight:800}.chip[_ngcontent-%COMP%]{background:#e5e7eb;border-radius:999px;padding:.15rem .6rem;font-size:.8rem}.card2[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 6px 18px -8px rgba(0,0,0,.2);padding:16px;background:#fff}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({imports:[[s.f.forChild(F)],s.f]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({providers:[],imports:[[a.CommonModule,k,d.a,r.j]]}),e})()},"un1/":function(e,t,n){"use strict";function a(e,t){const n=new Date(`1970-01-01 ${e}`),a=new Date(`1970-01-01 ${t}`),r=Math.abs(n.getTime()-a.getTime());return Math.floor(r/1e3)}function r(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());try{return JSON.parse(JSON.stringify(e))}catch(t){throw console.error("Deep copy failed for object:",e,t),new Error("Unable to deep copy object!")}}function d(e){e.Base.StiLicense.key="6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHlkHnETZDQa/PS+0KAqyGT4DpRlgFmGegaxKasr/6hj3WTsNszXi2AnvR96edDIZl0iQK5oAkmli4CDUblYqrhiAJUrUZtKyoZUOSwbjhyDdjuqCk8reDn/QTemFDwWuF4BfzOqXcdV9ceHmq8jqTiwrgF4Bc35HGUqPq+CnYqGQhfU3YY44xsR5JaAuLAXvuP05Oc6F9BQhBMqb6AUXjeD5T9OJWHiIacwv0LbxJAg5a1dVBDPR9E+nJu2dNxkG4EcLY4nf4tOvUh7uhose6Cp5nMlpfXUnY7k7Lq9r0XE/b+q1f11KCXK/t0GpGNnPL5Xy//JCUP7anSZ0SdSbuW8Spxp+r7StU/XLwt9vqKf5rsY9CN8D8u4Mc8RZiSXceDuKyhQo72Eu8yYFswP9COQ4lgOJGcaCv5h9GwR+Iva+coQENBQyY2dItFpsBwSAPvGs2/4V82ztLMsmkTpoAzYupvE2AoddxArDjjTMeyKowMI6qtTyhaF9zTnJ7X7gs09lgTg7Hey5I1Q66QFfcwK"}function s(e,t,n){return Math.min(Math.max(e,t),n)}function i(e){var t;return(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0}function o(e,t){return e.reduce((e,n)=>{const a=n[t];return e+("number"==typeof a?a:0)},0)}function l(e,t,n){t.loadDocument(n),t.renderAsync();var a=new e.Report.Export.StiHtmlExportSettings,r=new e.Report.Export.StiHtmlExportService,d=new e.System.IO.TextWriter,s=new e.Report.Export.StiHtmlTextWriter(d);r.exportTo(t,s,a);var i=document.createElement("iframe");i.name="frame1",i.style.position="absolute",i.style.top="-1000000px",document.body.appendChild(i);var o=i.contentDocument||i.contentWindow.document;return o.open(),o.write("</head><body>"),o.write(d.getStringBuilder().toString()),o.write("</body></html>"),o.close(),setTimeout(function(){window.frames.frame1.focus(),window.frames.frame1.print(),document.body.removeChild(i)},500),!1}function p(e){const t=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getFullYear()}-${n}-${t}`}function c(e){const t=e.replace(" PM","").replace(" AM","");return p(new Date(t))}n.d(t,"g",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"h",function(){return d}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return p}),n.d(t,"e",function(){return c})}}]);