(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{OnQw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{constructor(e){this._el=e,this.regex=new RegExp(/^[0-9]+(\.[0-9]*){0,1}$/g),this.specialKeys=["Backspace","Tab","End","Home"],this.allowDecimals=!1,this.ngModelChange=new r.EventEmitter}onInputChange(e){const t=this._el.nativeElement.value;this.allowDecimals?String(t).match(this.regex)||(this._el.nativeElement.value=""):(this._el.nativeElement.value=t.replace(/[^0-9]*/g,""),t!==this._el.nativeElement.value&&e.stopPropagation())}onKeyDown(e){if(this.allowDecimals){if(-1!==this.specialKeys.indexOf(e.key))return;this.fraction&&this.fraction>0&&(this.regex=new RegExp("^\\d*(\\.\\d{0,"+this.fraction+"})?$"));const t=this._el.nativeElement.value.concat(e.key);t&&!String(t).match(this.regex)&&e.preventDefault()}}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ElementRef))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","numbersOnly",""]],hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("input",function(e){return t.onInputChange(e)})("keydown",function(e){return t.onKeyDown(e)})},inputs:{allowDecimals:"allowDecimals",numbersOnly:"numbersOnly",fraction:"fraction"},outputs:{ngModelChange:"ngModelChange"}}),e})()},vUMv:function(e,t,n){"use strict";n.r(t),n.d(t,"StopProductsModule",function(){return y});var r=n("ofXK"),a=n("tyNb"),i=n("fXoL"),l=n("tk/3"),o=n("LNWR");let d=(()=>{class e{constructor(e,t){this.http=e,this.common=t}FirstOpen(){return this.http.get(this.common.rooturl+"/StopProduct/FirstOpen")}GetStopDurationList(){return this.http.get(this.common.rooturl+"/StopProduct/GetStopDurationList")}UpdateproductProperties(e){return this.http.post(this.common.rooturl+"/StopProduct/UpdateproductProperties/",e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](l.b),i["\u0275\u0275inject"](o.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=n("TQQS"),c=n("e4hC"),p=n("sYmb"),m=n("5eHb"),u=n("jcQU"),h=n("3Pt+"),S=n("OnQw");const v=["frmRef"];function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",27),i["\u0275\u0275element"](1,"div",28),i["\u0275\u0275elementEnd"]())}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",29),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"setting.BranchIsRequired")," "))}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"th",30),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275elementStart"](4,"input",31,32),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.IsSelected=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"td"),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"td"),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"td"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"td"),i["\u0275\u0275elementStart"](14,"ejs-combobox",33,34),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.StopDurationType=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"td",25),i["\u0275\u0275elementStart"](17,"input",35,36),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.StopDuration=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"td",25),i["\u0275\u0275text"](20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"td",25),i["\u0275\u0275text"](22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n+1),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate1"]("name","IsSelected",n,""),i["\u0275\u0275property"]("ngModel",e.IsSelected),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.Name),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.AvailableQuantity),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.Status?i["\u0275\u0275pipeBind1"](12,22,"stock."+e.Status):e.Status),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate1"]("name","StopDurationType",n,""),i["\u0275\u0275propertyInterpolate1"]("id","StopDurationType",n,"_Id"),i["\u0275\u0275property"]("ngModel",e.StopDurationType)("allowFiltering",!0)("autofill",!0)("dataSource",r.StopDurationList)("enabled",e.IsSelected)("fields",r.Flds),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate1"]("name","StopDuration",n,""),i["\u0275\u0275propertyInterpolate1"]("id","StopDuration_id",n,""),i["\u0275\u0275property"]("numbersOnly",e.StopDuration)("allowDecimals",!1)("ngModel",e.StopDuration)("disabled",!e.IsSelected),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",e.Reminder," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",r.getProperityBranches(e)," ")}}const E=[{path:"",component:(()=>{class e extends s.j{constructor(e,t,n,r,a,i,l){super(),this._StopProductService=e,this._branchService=t,this.languageSerService=n,this.translate=r,this.router=a,this.toastr=i,this.toastrMessage=l,this.Fld={text:"Name",value:"DocumentId"},this.initializeobjects()}ngOnInit(){this.GetDate()}initializeobjects(){this.responseobj={},this.service=this._StopProductService,this.request=this.router.getCurrentNavigation().extras,this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}GetDate(){this.requestStarted=!0,this._StopProductService.GetStopDurationList().subscribe(e=>{this.StopDurationList=e,this.StopDurationList=this.StopDurationList.map(e=>({Name:this.translate.instant("setting."+e.Name),Id:e.Id})),this.Flds={text:"Name",value:"Id"}}),this._StopProductService.FirstOpen().subscribe(e=>{this.requestStarted=!1,this.Products=e}),this.getBranches()}getBranches(){this._branchService.getLookUp().subscribe(e=>{this.branches=e})}Save(){if(this.submitted=!0,!this.selectedBranches||!this.selectedBranches.length)return;let e=[];this.Products.forEach(t=>{t.IsSelected&&(t.BranchesList=this.selectedBranches,e.push(t))}),this._StopProductService.UpdateproductProperties(e).subscribe(e=>{2==e&&(this.toastr.info(this.toastrMessage.GlobalMessages(e)),this.GetDate(),this.selectedBranches=[],this.submitted=!1)})}getProperityBranches(e){var t,n;return(null===(t=e.BranchesList)||void 0===t?void 0:t.length)&&(null===(n=this.branches)||void 0===n?void 0:n.length)?this.branches.filter(t=>e.BranchesList.includes(t.DocumentId)).map(e=>e.Name).join(", "):""}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d),i["\u0275\u0275directiveInject"](c.c),i["\u0275\u0275directiveInject"](s.f),i["\u0275\u0275directiveInject"](p.e),i["\u0275\u0275directiveInject"](a.b),i["\u0275\u0275directiveInject"](m.b),i["\u0275\u0275directiveInject"](s.d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["app-stop-products"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](v,5),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.frmRef=e.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:62,vars:39,consts:[["id","preloader-wrap",4,"ngIf"],[1,"col-md-12"],[1,"ms-card"],[1,"ms-card-header"],[1,"row"],[1,"col-md-4"],[1,"d-flex","justify-content-around","align-items-center"],[1,"d-flex","justify-content-start","align-items-center"],["type","button",1,"btn","btn-secondary","m-0","btnEdit",3,"click"],[1,""],["type","button",1,"btn","btn-success","m-0","btnEdit",3,"click"],[1,"col-md-6","mb-3"],[1,"col-md-3","d-flex","justify-content-start","align-items-center","label1"],["for","validationCustom19"],[1,"col-md-8","paddingLeftz"],[1,"input-group","editInputGroup"],[1,"input-group-addon"],[1,"bi","bi-credit-card-2-back-fill"],[1,"input-group"],["name","branchesList","placeholder","",1,"form-control",3,"ngModel","dataSource","fields","ngModelChange"],["branchesList","ngModel"],[4,"ngIf"],[1,"ms-card-body"],[1,"table-responsive"],[1,"table","table-bordered","BottomTableReturnOrder"],["scope","col"],[4,"ngFor","ngForOf"],["id","preloader-wrap"],[1,"col-md-9","d-flex","justify-content-center","align-items-center"],[1,"alert","alert-danger","editAlertCash"],["scope","row"],["type","checkbox",3,"name","ngModel","ngModelChange"],["IsSelected{{i}}","ngModel"],[1,"form-control","borderRadius",3,"name","ngModel","allowFiltering","autofill","dataSource","enabled","fields","id","ngModelChange"],["StopDurationType{{i}}","ngModel"],[1,"form-control","borderRadius",3,"name","numbersOnly","allowDecimals","ngModel","id","disabled","ngModelChange"],["StopDuration","ngModel"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,f,2,0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275elementStart"](6,"div",6),i["\u0275\u0275elementStart"](7,"div",7),i["\u0275\u0275elementStart"](8,"button",8),i["\u0275\u0275listener"]("click",function(){return t.Save()}),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",9),i["\u0275\u0275elementStart"](12,"button",10),i["\u0275\u0275listener"]("click",function(){return t.GetDate()}),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",11),i["\u0275\u0275elementStart"](16,"div",4),i["\u0275\u0275elementStart"](17,"div",12),i["\u0275\u0275elementStart"](18,"label",13),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",14),i["\u0275\u0275elementStart"](22,"div",15),i["\u0275\u0275elementStart"](23,"div",16),i["\u0275\u0275element"](24,"i",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",18),i["\u0275\u0275elementStart"](26,"ejs-multiselect",19,20),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedBranches=e}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](28,g,4,3,"div",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",22),i["\u0275\u0275elementStart"](30,"div",23),i["\u0275\u0275elementStart"](31,"table",24),i["\u0275\u0275elementStart"](32,"thead"),i["\u0275\u0275elementStart"](33,"tr"),i["\u0275\u0275elementStart"](34,"th",25),i["\u0275\u0275text"](35,"#"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"th",25),i["\u0275\u0275text"](37),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"th",25),i["\u0275\u0275text"](40),i["\u0275\u0275pipe"](41,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](42,"th",25),i["\u0275\u0275text"](43),i["\u0275\u0275pipe"](44,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"th",25),i["\u0275\u0275text"](46),i["\u0275\u0275pipe"](47,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"th",25),i["\u0275\u0275text"](49),i["\u0275\u0275pipe"](50,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](51,"th",25),i["\u0275\u0275text"](52),i["\u0275\u0275pipe"](53,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"th",25),i["\u0275\u0275text"](55),i["\u0275\u0275pipe"](56,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](57,"th",25),i["\u0275\u0275text"](58),i["\u0275\u0275pipe"](59,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"tbody"),i["\u0275\u0275template"](61,b,23,24,"tr",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngIf",t.requestStarted),i["\u0275\u0275advance"](9),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](10,17,"Shared.Save")," "),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](14,19,"Shared.Refresh")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,21,"Shared.effectedForBranches")," : "),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngModel",t.selectedBranches)("dataSource",t.branches)("fields",t.Fld),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.submitted&&(!t.selectedBranches||!t.selectedBranches.length)),i["\u0275\u0275advance"](9),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](38,23,"Shared.Select")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](41,25,"Shared.productName")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](44,27,"stock.AvailableQuantity")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](47,29,"Reports.status")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](50,31,"products.StopDurationType")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](53,33,"products.StopDuration")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](56,35,"Shared.Remainder")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](59,37,"Reports.Branches")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.Products))},directives:[r.NgIf,u.f,h.r,h.u,r.NgForOf,h.a,u.a,h.c,S.a],pipes:[p.d],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.f.forChild(E)],a.f]}),e})();var x=n("PCNd");let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,I,u.b,x.a]]}),e})()}}]);