(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{gsdy:function(e,t,i){"use strict";i.r(t),i.d(t,"BiometricModule",function(){return D});var n=i("ofXK"),o=i("tyNb"),r=i("fXoL"),s=i("tk/3"),a=i("LNWR");let l=(()=>{class e{constructor(e,t){this.http=e,this.common=t}GetBioConfigs(e={}){return this.http.get(this.common.rooturl+"/Biometric/GetBioConfigs")}GetAllEmployess(){return this.http.get(this.common.rooturl+"/Biometric/GetAllEmployess")}InsertBioConfig(e={}){return this.http.post(this.common.rooturl+"/Biometric/InsertBioConfig",e)}DeleteBioConfig(e){return this.http.delete(this.common.rooturl+"/Biometric/DeleteBioConfig/"+e)}UpdateBioConfig(e={}){return this.http.put(this.common.rooturl+"/Biometric/UpdateBioConfig",e)}PingBiometricDevice(e={}){return this.http.post(this.common.rooturl+"/Biometric/PingBiometricDevice",e)}ConnectBiometricDevice(e={}){return this.http.post(this.common.rooturl+"/Biometric/ConnectBiometricDevice",e)}GetBiometricLogData(e={}){return this.http.post(this.common.rooturl+"/Biometric/GetBiometricLogData",e)}SaveBiometricLogData(e){return this.http.post(this.common.rooturl+"/Biometric/InsertBios",e)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](s.b),r["\u0275\u0275inject"](a.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=i("5eHb"),m=i("E8vI"),p=i("R9YG"),d=i("sYmb"),g=i("3Pt+"),h=i("GJ+o");const u=["grid"];function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"option",32),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275property"]("ngValue",e),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate2"](" ",e.Name," >> ",e.Ip," ")}}function b(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,"Shared.connect")))}function C(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,"Shared.DisConnect")))}function B(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",33),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().SaveBiometricLogData()}),r["\u0275\u0275text"](1," SaveData "),r["\u0275\u0275elementEnd"]()}}const S=function(e,t){return{Connect:e,Disconnect:t}},x=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,r){this.Biometricser=e,this.toastr=t,this.datepipe=i,this.toastrMessage=n,this.languageSerService=o,this.translate=r,this.BiometricConfigList=[],this.LogDataList=[],this.employees=[],this.BioConfig={},this.Connected=!1,this.DateFormat={type:"date",format:"dd/MM/yyyy"},this.TimeFormat={type:"date",format:"HH:mm:ss"},this.languageSerService.currentLang.subscribe(e=>this.language=e),this.translate.use(this.language)}ngOnInit(){this.GetAllConfigs(),this.GetAllEmployess(),this.initializeGrid(),this.initializeGrid2()}initializeGrid(){this.pageSettings={pageSizes:!0,pageSize:10},this.toolbarOptions=["Search","PdfExport","ExcelExport"],this.editOptions={showDeleteConfirmDialog:!0,allowEditing:!0,allowDeleting:!0},this.filterOptions={type:"Menu"},this.commands=[{type:"Edit",buttonOption:{cssClass:"e-flat",iconCss:"e-edit e-icons"}},{type:"Delete",buttonOption:{cssClass:"e-flat",iconCss:"e-delete e-icons"}},{type:"Save",buttonOption:{cssClass:"e-flat",iconCss:"e-update e-icons"}},{type:"Cancel",buttonOption:{cssClass:"e-flat",iconCss:"e-cancel-icon e-icons"}}]}initializeGrid2(){this.pageSettings2={pageSizes:!0,pageSize:10},this.toolbarOptions2=["Search","PdfExport","ExcelExport"],this.editOptions2={showDeleteConfirmDialog:!1,allowEditing:!1,allowDeleting:!1},this.filterOptions2={type:"Menu"},this.commands2=[]}actionBegin(e){if("save"===e.requestType){let t=e.data;this.BioConfig=t,t.DocumentId?this.UpdateBioConfig():this.InsertBioConfig()}"delete"===e.requestType&&this.DeleteBioConfig(e.data[0].DocumentId)}GetAllEmployess(){this.Biometricser.GetAllEmployess().subscribe(e=>{this.employees=e,this.employees=this.employees.filter(e=>e.NumberFingerprint>0)})}GetAllConfigs(){this.Biometricser.GetBioConfigs().subscribe(e=>{this.BiometricConfigList=e,this.grid.refresh()})}UpdateBioConfig(){this.Biometricser.UpdateBioConfig(this.BioConfig).subscribe(e=>{this.toastr.info(this.toastrMessage.GlobalMessages(e),"biometrics"),this.GetAllConfigs()},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}InsertBioConfig(){this.Biometricser.InsertBioConfig(this.BioConfig).subscribe(e=>{this.toastr.success(this.toastrMessage.GlobalMessages(e),"biometrics"),this.GetAllConfigs()},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}DeleteBioConfig(e){this.Biometricser.DeleteBioConfig(e).subscribe(e=>{3==e?(this.toastr.warning(this.toastrMessage.GlobalMessages(e),"biometrics"),this.GetAllConfigs()):this.toastr.warning(this.toastrMessage.GlobalMessages(e),"biometrics"),this.GetAllConfigs()},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}AddNewBioConfig(){this.BiometricConfigList.push({Name:"",Ip:""}),this.grid.refresh()}PingBiometricDevice(){this.Biometricser.PingBiometricDevice({IP:this.ConfigDocument.Ip,PORT:this.ConfigDocument.Port,MNumber:this.ConfigDocument.MachineNo}).subscribe(e=>{this.toastr.success(this.toastrMessage.GlobalMessages(8),"biometrics")},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}ConnectDevice(){this.Biometricser.ConnectBiometricDevice({IP:this.ConfigDocument.Ip,PORT:this.ConfigDocument.Port,MNumber:this.ConfigDocument.MachineNo}).subscribe(e=>{1==e?(this.toastr.success(this.toastrMessage.GlobalMessages(9),"biometrics"),this.Connected=!0):(this.toastr.success(this.toastrMessage.GlobalMessages(10),"biometrics"),this.Connected=!1)},e=>{this.Connected=!1,this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}GetData(){this.Biometricser.GetBiometricLogData({IP:this.ConfigDocument.Ip,PORT:this.ConfigDocument.Port,MNumber:this.ConfigDocument.MachineNo}).subscribe(e=>{this.LogDataList=e,this.LogDataList.forEach(e=>{let t=this.employees.filter(t=>t.NumberFingerprint==e.IndRegID)[0];t&&(e.EmployeeId=t.Id,e.Employee=t)})},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}SaveBiometricLogData(){this.Biometricser.SaveBiometricLogData(this.LogDataList).subscribe(e=>{this.toastr.success(this.toastrMessage.GlobalMessages(1==e?e:1),"biometrics")},e=>{this.toastr.error(this.toastrMessage.GlobalMessages(e),"biometrics")})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l),r["\u0275\u0275directiveInject"](c.b),r["\u0275\u0275directiveInject"](n.DatePipe),r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](p.a),r["\u0275\u0275directiveInject"](d.e))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-biometric"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](u,5),r["\u0275\u0275viewQuery"](u,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.grid=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.grid2=e.first)}},decls:64,vars:74,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-7"],[1,"ms-card"],[1,"ms-card-header"],[1,"m-0"],[1,"ms-card-body"],[1,"col-md-3","ml-3"],["name","ConfigDocumentId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-circle","bg-defualt","form-control","col-md-1",2,"margin","15px","top","-14px",3,"click"],[1,"btn","btn-circle","bg-defualt","form-control","col-md-1","text-white",2,"margin","15px","top","-14px",3,"ngClass","click"],[4,"ngIf"],[1,"btn","btn-circle","bg-blue","form-control","col-md-2",2,"margin","15px","top","-14px",3,"disabled","click"],["style","margin: 15px; top: -14px","class","btn btn-circle bg-success form-control col-md-2 text-white",3,"click",4,"ngIf"],["id","Grid2",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","toolbar","allowGrouping","allowPdfExport","allowExcelExport","editSettings","actionBegin"],["grid2",""],[1,"d-flex"],["field","MachineNumber","textAlign","center",3,"headerText"],["field","IndRegID","textAlign","center",3,"headerText"],["field","EmployeeName","textAlign","center",3,"headerText"],["field","DateTimeRecord","textAlign","center","type","date",3,"headerText","format"],[1,"col-md-5"],[1,"ml-auto"],[1,"btn","btn-circle","bg-blue","form-control","col-md-2",2,"margin","15px","top","-14px",3,"click"],["id","Grid",3,"dataSource","allowPaging","pageSettings","allowSorting","allowFiltering","filterSettings","toolbar","allowGrouping","allowPdfExport","allowExcelExport","editSettings","actionBegin"],["grid",""],["field","Name","textAlign","center",3,"headerText"],["field","Ip","headerText","IP","textAlign","center"],["field","Port","headerText","Port","textAlign","center"],["field","MachineNo","textAlign","center",3,"headerText"],["textAlign","center",3,"headerText","commands"],[3,"ngValue"],[1,"btn","btn-circle","bg-success","form-control","col-md-2","text-white",2,"margin","15px","top","-14px",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"h5",5),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",6),r["\u0275\u0275elementStart"](9,"div",1),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"select",8),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.ConfigDocument=e}),r["\u0275\u0275text"](12," // value is a string or number "),r["\u0275\u0275template"](13,f,2,3,"option",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"button",10),r["\u0275\u0275listener"]("click",function(){return t.PingBiometricDevice()}),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"button",11),r["\u0275\u0275listener"]("click",function(){return t.ConnectDevice()}),r["\u0275\u0275template"](18,b,3,3,"span",12),r["\u0275\u0275template"](19,C,3,3,"span",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"button",13),r["\u0275\u0275listener"]("click",function(){return t.GetData()}),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](23,B,2,0,"button",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"ejs-grid",15,16),r["\u0275\u0275listener"]("actionBegin",function(e){return t.actionBegin(e)}),r["\u0275\u0275elementStart"](26,"h1"),r["\u0275\u0275text"](27,"Halaaaaaaaaaa!"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"e-columns",17),r["\u0275\u0275element"](29,"e-column",18),r["\u0275\u0275pipe"](30,"translate"),r["\u0275\u0275element"](31,"e-column",19),r["\u0275\u0275pipe"](32,"translate"),r["\u0275\u0275element"](33,"e-column",20),r["\u0275\u0275pipe"](34,"translate"),r["\u0275\u0275element"](35,"e-column",21),r["\u0275\u0275pipe"](36,"translate"),r["\u0275\u0275element"](37,"e-column",21),r["\u0275\u0275pipe"](38,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](39,"div",22),r["\u0275\u0275elementStart"](40,"div",3),r["\u0275\u0275elementStart"](41,"div",4),r["\u0275\u0275elementStart"](42,"h5",5),r["\u0275\u0275text"](43),r["\u0275\u0275pipe"](44,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"div",6),r["\u0275\u0275elementStart"](46,"div",17),r["\u0275\u0275elementStart"](47,"div",23),r["\u0275\u0275elementStart"](48,"button",24),r["\u0275\u0275listener"]("click",function(){return t.AddNewBioConfig()}),r["\u0275\u0275text"](49),r["\u0275\u0275pipe"](50,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](51,"ejs-grid",25,26),r["\u0275\u0275listener"]("actionBegin",function(e){return t.actionBegin(e)}),r["\u0275\u0275elementStart"](53,"h1"),r["\u0275\u0275text"](54,"Halaaaaaaaaaa!"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"e-columns",17),r["\u0275\u0275element"](56,"e-column",27),r["\u0275\u0275pipe"](57,"translate"),r["\u0275\u0275element"](58,"e-column",28),r["\u0275\u0275element"](59,"e-column",29),r["\u0275\u0275element"](60,"e-column",30),r["\u0275\u0275pipe"](61,"translate"),r["\u0275\u0275element"](62,"e-column",31),r["\u0275\u0275pipe"](63,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](7,45,"Shared.BiometricConnection")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.ConfigDocument),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",t.BiometricConfigList),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,47,"Shared.Ping")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction2"](71,S,!t.Connected,t.Connected)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.Connected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.Connected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",!t.Connected),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](22,49,"Shared.getdata")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.LogDataList.length>0&&t.Connected),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("dataSource",t.LogDataList)("allowPaging",!0)("pageSettings",t.pageSettings2)("allowSorting",!0)("allowFiltering",!0)("filterSettings",t.filterOptions2)("toolbar",t.toolbarOptions2)("allowGrouping",!0)("allowPdfExport",!0)("allowExcelExport",!0)("editSettings",t.editOptions2),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](30,51,"Shared.Machinenumber")),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](32,53,"Shared.EnrollNumber")),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](34,55,"Shared.Name")),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](36,57,"CashReceipt.Date")),r["\u0275\u0275property"]("format",t.DateFormat),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](38,59,"setting.Time")),r["\u0275\u0275property"]("format",t.TimeFormat),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](44,61,"Shared.BiometricConfiguration")),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](50,63,"Shared.AddDevice")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("dataSource",t.BiometricConfigList)("allowPaging",!0)("pageSettings",t.pageSettings)("allowSorting",!0)("allowFiltering",!0)("filterSettings",t.filterOptions)("toolbar",t.toolbarOptions)("allowGrouping",!0)("allowPdfExport",!0)("allowExcelExport",!0)("editSettings",t.editOptions),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](57,65,"Shared.deviceName")),r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](61,67,"Shared.Machinenumber")),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerText",r["\u0275\u0275pipeBind1"](63,69,"delivery.Actions")),r["\u0275\u0275property"]("commands",t.commands))},directives:[g.A,g.z,g.r,g.u,n.NgForOf,n.NgClass,n.NgIf,h.p,h.g,h.b,h.f,h.a,g.v,g.D],pipes:[d.d],styles:[".Connect[_ngcontent-%COMP%]{background-color:silver}.Disconnect[_ngcontent-%COMP%]{background-color:green}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[o.f.forChild(x)],o.f]}),e})();var y=i("PCNd");let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,v,g.j,g.y,y.a]]}),e})()}}]);